import{c as l,a as s,b as g,t as d,w as m,v as h,d as U,o as n,e as S,f as I,g as k,n as p,F as y,r as b,h as w,i as A,j as L,k as M,l as j,m as x,p as E}from"./chunks/vue.BKuMIyco.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))c(t);new MutationObserver(t=>{for(const o of t)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&c(r)}).observe(document,{childList:!0,subtree:!0});function u(t){const o={};return t.integrity&&(o.integrity=t.integrity),t.referrerPolicy&&(o.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?o.credentials="include":t.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function c(t){if(t.ep)return;t.ep=!0;const o=u(t);fetch(t.href,o)}})();const f=(i,e)=>{const u=i.__vccOpts||i;for(const[c,t]of e)u[c]=t;return u},B={name:"UserAuth",props:{show:{type:Boolean,default:!1}},data(){return{isRegister:!1,formData:{username:"",password:""},error:""}},watch:{show(i){i&&this.resetForm()}},methods:{toggleMode(){this.isRegister=!this.isRegister,this.resetForm()},resetForm(){this.formData={username:"",password:""},this.error=""},handleClose(){this.$emit("close")},handleOverlayClick(){this.handleClose()},async handleSubmit(){if(!this.formData.username||!this.formData.password){this.error="请填写用户名和密码";return}if(this.formData.username.length<3){this.error="用户名长度至少为3个字符";return}if(this.formData.password.length<4){this.error="密码长度至少为4个字符";return}try{const i=localStorage.getItem("normalUsers");let e=[];if(i&&(e=JSON.parse(i)),this.isRegister){if(e.some(u=>u.username===this.formData.username)){this.error="用户名已存在";return}e.push({username:this.formData.username,password:this.formData.password}),localStorage.setItem("normalUsers",JSON.stringify(e)),localStorage.setItem("userLoggedIn","true"),localStorage.setItem("username",this.formData.username),this.$emit("login-success",this.formData.username),this.handleClose()}else{if(!e.some(t=>t.username===this.formData.username)){this.error="你的账户因违反网站安全管理条例而注销，请重新注册";return}if(!e.find(t=>t.username===this.formData.username&&t.password===this.formData.password)){this.error="用户名或密码错误";return}localStorage.setItem("userLoggedIn","true"),localStorage.setItem("username",this.formData.username),this.$emit("login-success",this.formData.username),this.handleClose()}}catch(i){this.error="操作失败，请重试",console.error(i)}}}},J={class:"auth-header"},z={key:0,class:"error-message"},R={class:"auth-form"},H={class:"form-group"},q={class:"form-group"},K={class:"auth-footer"};function Y(i,e,u,c,t,o){return n(),l("div",{class:"user-auth-overlay",onClick:e[6]||(e[6]=(...r)=>o.handleOverlayClick&&o.handleOverlayClick(...r))},[s("div",{class:"user-auth-container",onClick:e[5]||(e[5]=U(()=>{},["stop"]))},[s("div",J,[s("h2",null,d(t.isRegister?"用户注册":"用户登录"),1),s("button",{class:"close-btn",onClick:e[0]||(e[0]=(...r)=>o.handleClose&&o.handleClose(...r))},"×")]),t.error?(n(),l("div",z,d(t.error),1)):g("",!0),s("div",R,[s("div",H,[e[7]||(e[7]=s("label",{for:"username"},"用户名",-1)),m(s("input",{type:"text",id:"username","onUpdate:modelValue":e[1]||(e[1]=r=>t.formData.username=r),placeholder:"请输入用户名"},null,512),[[h,t.formData.username]])]),s("div",q,[e[8]||(e[8]=s("label",{for:"password"},"密码",-1)),m(s("input",{type:"password",id:"password","onUpdate:modelValue":e[2]||(e[2]=r=>t.formData.password=r),placeholder:"请输入密码"},null,512),[[h,t.formData.password]])]),s("button",{class:"auth-button",onClick:e[3]||(e[3]=(...r)=>o.handleSubmit&&o.handleSubmit(...r))},d(t.isRegister?"注册":"登录"),1),s("div",K,[s("span",{onClick:e[4]||(e[4]=(...r)=>o.toggleMode&&o.toggleMode(...r)),class:"switch-mode"},d(t.isRegister?"已有账号？立即登录":"还没有账号？立即注册"),1)])])])])}const W=f(B,[["render",Y],["__scopeId","data-v-1373a9e2"]]),G={name:"Header",components:{UserAuth:W},data(){return{menuOpen:!1,longPressTimer:null,showUserAuth:!1,isUserLoggedIn:localStorage.getItem("userLoggedIn")==="true",username:localStorage.getItem("username")||"",userMenuOpen:!1}},methods:{toggleMenu(){this.menuOpen=!this.menuOpen},closeMenu(){this.menuOpen=!1},startLongPress(){this.longPressTimer=setTimeout(()=>{this.$emit("show-admin-login",{fromLogoPress:!0})},1500)},toggleUserMenu(){this.userMenuOpen=!this.userMenuOpen},handlePublishArticleClick(){this.handlePublishArticle()},handlePublishArticle(){localStorage.getItem("userLoggedIn")==="true"?this.$emit("show-article-form"):alert("请先登录后再发布文章"),this.userMenuOpen=!1},handleUserSettings(){alert("用户设置功能待实现"),this.userMenuOpen=!1},handleUserLogout(){localStorage.removeItem("userLoggedIn"),localStorage.removeItem("username"),this.isUserLoggedIn=!1,this.username="",this.userMenuOpen=!1,window.location.reload()},handleAuthSuccess(i){this.isUserLoggedIn=!0,this.username=i,this.showUserAuth=!1},handleAuthClose(){this.showUserAuth=!1},cancelLongPress(){this.longPressTimer&&(clearTimeout(this.longPressTimer),this.longPressTimer=null)}},mounted(){this.handleClickOutside=i=>{if(this.$el)try{const e=this.$el.querySelector(".user-menu-wrapper");e&&!e.contains(i.target)&&this.userMenuOpen&&(this.userMenuOpen=!1)}catch(e){console.warn("Error in handleClickOutside:",e)}},document.addEventListener("click",this.handleClickOutside)},beforeUnmount(){this.cancelLongPress(),this.userMenuOpen=!1,document.removeEventListener("click",this.handleClickOutside)}},Q={class:"sticky top-0 z-50 bg-white/90 backdrop-blur-sm shadow-sm transition-custom"},X={class:"container mx-auto px-4 py-4 flex justify-between items-center"},Z={class:"flex items-center gap-4"},$={class:"hidden md:block relative"},ee={key:1,class:"user-menu-wrapper"},se={class:"user-dropdown-menu"},te={class:"md:hidden bg-white border-t"},re={class:"container mx-auto px-4 py-2 flex flex-col space-y-3"},oe={class:"py-2 border-t"},ie={key:1,class:"flex justify-between items-center user-menu-wrapper"},ne={class:"flex items-center"},le={class:"ml-2"},ae={class:"ml-6 mt-2 flex flex-col space-y-2"};function de(i,e,u,c,t,o){const r=b("UserAuth");return n(),l(y,null,[s("header",Q,[s("div",X,[s("a",{href:"#",class:"text-2xl font-bold text-primary flex items-center gap-2",onMousedown:e[0]||(e[0]=(...a)=>o.startLongPress&&o.startLongPress(...a)),onTouchstart:e[1]||(e[1]=(...a)=>o.startLongPress&&o.startLongPress(...a)),onMouseup:e[2]||(e[2]=(...a)=>o.cancelLongPress&&o.cancelLongPress(...a)),onTouchend:e[3]||(e[3]=(...a)=>o.cancelLongPress&&o.cancelLongPress(...a)),onMouseleave:e[4]||(e[4]=(...a)=>o.cancelLongPress&&o.cancelLongPress(...a)),onTouchcancel:e[5]||(e[5]=(...a)=>o.cancelLongPress&&o.cancelLongPress(...a)),onClick:e[6]||(e[6]=(...a)=>o.handlePublishArticleClick&&o.handlePublishArticleClick(...a))},[...e[22]||(e[22]=[s("i",{class:"fa fa-pencil-square-o","aria-hidden":"true"},null,-1),s("span",null,"Boge",-1)])],32),s("div",Z,[e[29]||(e[29]=I('<nav class="hidden md:flex items-center space-x-8" data-v-5aaef954><a href="#about" class="text-gray-600 hover:text-primary transition-custom" data-v-5aaef954>关于开发者</a><a href="#blog" class="text-gray-600 hover:text-primary transition-custom" data-v-5aaef954>博格简介</a><a href="#articles" class="text-gray-600 hover:text-primary transition-custom" data-v-5aaef954>文章</a><a href="#contact" class="text-gray-600 hover:text-primary transition-custom" data-v-5aaef954>联系开发者</a></nav>',1)),s("div",$,[t.isUserLoggedIn?(n(),l("div",ee,[s("button",{onClick:e[8]||(e[8]=(...a)=>o.toggleUserMenu&&o.toggleUserMenu(...a)),class:"user-menu-trigger"},[e[24]||(e[24]=s("i",{class:"fa fa-user-circle-o","aria-hidden":"true"},null,-1)),s("span",null,d(t.username),1),e[25]||(e[25]=s("i",{class:"fa fa-angle-down","aria-hidden":"true"},null,-1))]),m(s("div",se,[s("button",{onClick:e[9]||(e[9]=(...a)=>o.handlePublishArticle&&o.handlePublishArticle(...a)),class:"dropdown-item"},[...e[26]||(e[26]=[s("i",{class:"fa fa-pencil","aria-hidden":"true"},null,-1),s("span",null,"发布文章",-1)])]),s("button",{onClick:e[10]||(e[10]=(...a)=>o.handleUserSettings&&o.handleUserSettings(...a)),class:"dropdown-item"},[...e[27]||(e[27]=[s("i",{class:"fa fa-cog","aria-hidden":"true"},null,-1),s("span",null,"设置",-1)])]),s("button",{onClick:e[11]||(e[11]=(...a)=>o.handleUserLogout&&o.handleUserLogout(...a)),class:"dropdown-item"},[...e[28]||(e[28]=[s("i",{class:"fa fa-sign-out","aria-hidden":"true"},null,-1),s("span",null,"退出登录",-1)])])],512),[[k,t.userMenuOpen]])])):(n(),l("button",{key:0,onClick:e[7]||(e[7]=a=>t.showUserAuth=!0),class:"login-btn"},[...e[23]||(e[23]=[s("i",{class:"fa fa-user-circle-o","aria-hidden":"true"},null,-1),s("span",null,"登录",-1)])]))])]),s("button",{onClick:e[12]||(e[12]=(...a)=>o.toggleMenu&&o.toggleMenu(...a)),class:"md:hidden text-gray-600 hover:text-primary transition-custom"},[s("i",{class:p(["fa",t.menuOpen?"fa-times":"fa-bars","text-xl"]),"aria-hidden":"true"},null,2)])]),m(s("div",te,[s("div",re,[s("a",{href:"#about",class:"py-2 text-gray-600 hover:text-primary transition-custom",onClick:e[13]||(e[13]=(...a)=>o.closeMenu&&o.closeMenu(...a))},"关于开发者"),s("a",{href:"#blog",class:"py-2 text-gray-600 hover:text-primary transition-custom",onClick:e[14]||(e[14]=(...a)=>o.closeMenu&&o.closeMenu(...a))},"博格简介"),s("a",{href:"#articles",class:"py-2 text-gray-600 hover:text-primary transition-custom",onClick:e[15]||(e[15]=(...a)=>o.closeMenu&&o.closeMenu(...a))},"文章"),s("a",{href:"#contact",class:"py-2 text-gray-600 hover:text-primary transition-custom",onClick:e[16]||(e[16]=(...a)=>o.closeMenu&&o.closeMenu(...a))},"联系开发者"),s("div",oe,[t.isUserLoggedIn?(n(),l("div",ie,[s("div",ne,[e[31]||(e[31]=s("i",{class:"fa fa-user-circle-o","aria-hidden":"true"},null,-1)),s("span",le,d(t.username),1)]),s("button",{onClick:e[18]||(e[18]=(...a)=>o.toggleUserMenu&&o.toggleUserMenu(...a)),class:"text-gray-600"},[...e[32]||(e[32]=[s("i",{class:"fa fa-angle-down","aria-hidden":"true"},null,-1)])])])):(n(),l("button",{key:0,onClick:e[17]||(e[17]=a=>{t.showUserAuth=!0,o.closeMenu()}),class:"w-full text-left py-2 text-gray-600 hover:text-primary transition-custom"},[...e[30]||(e[30]=[s("i",{class:"fa fa-user-circle-o","aria-hidden":"true"},null,-1),s("span",{class:"ml-2"},"登录",-1)])])),m(s("div",ae,[s("button",{onClick:e[19]||(e[19]=a=>{o.handlePublishArticle,o.closeMenu()}),class:"text-left py-1 text-gray-600 hover:text-primary transition-custom"},[...e[33]||(e[33]=[s("i",{class:"fa fa-pencil","aria-hidden":"true"},null,-1),s("span",{class:"ml-2"},"发布文章",-1)])]),s("button",{onClick:e[20]||(e[20]=a=>{o.handleUserSettings,o.closeMenu()}),class:"text-left py-1 text-gray-600 hover:text-primary transition-custom"},[...e[34]||(e[34]=[s("i",{class:"fa fa-cog","aria-hidden":"true"},null,-1),s("span",{class:"ml-2"},"设置",-1)])]),s("button",{onClick:e[21]||(e[21]=a=>{o.handleUserLogout,o.closeMenu()}),class:"text-left py-1 text-gray-600 hover:text-primary transition-custom"},[...e[35]||(e[35]=[s("i",{class:"fa fa-sign-out","aria-hidden":"true"},null,-1),s("span",{class:"ml-2"},"退出登录",-1)])])],512),[[k,t.userMenuOpen]])])])],512),[[k,t.menuOpen]])]),t.showUserAuth?(n(),S(r,{key:0,show:t.showUserAuth,onClose:o.handleAuthClose,onLoginSuccess:o.handleAuthSuccess},null,8,["show","onClose","onLoginSuccess"])):g("",!0)],64)}const ue=f(G,[["render",de],["__scopeId","data-v-5aaef954"]]),ce={name:"Hero"},me={class:"relative bg-gradient-to-br from-blue-50 to-indigo-50 py-20 md:py-32 overflow-hidden"};function ge(i,e,u,c,t,o){return n(),l("section",me,[...e[0]||(e[0]=[I('<div class="absolute inset-0 opacity-10" data-v-98d06034><div class="absolute top-10 left-10 w-40 h-40 rounded-full bg-primary" data-v-98d06034></div><div class="absolute bottom-10 right-10 w-60 h-60 rounded-full bg-secondary" data-v-98d06034></div></div><div class="container mx-auto px-4 relative z-10" data-v-98d06034><div class="max-w-3xl mx-auto text-center" data-v-98d06034><h1 class="text-[clamp(2.5rem,5vw,4rem)] font-bold text-dark mb-6 leading-tight text-shadow" data-v-98d06034> 探索思想，记录生活 </h1><p class="text-[clamp(1.1rem,2vw,1.3rem)] text-gray-600 mb-8" data-v-98d06034> 欢迎来到博格，这里分享思考、学习和生活点滴 </p><a href="#articles" class="inline-block bg-primary hover:bg-primary/90 text-white font-medium px-8 py-3 rounded-full shadow-lg hover:shadow-xl transition-custom transform hover:-translate-y-1" data-v-98d06034> 浏览文章 </a></div></div>',2)])])}const pe=f(ce,[["render",ge],["__scopeId","data-v-98d06034"]]),he={name:"About",data(){return{greeting:"你好，我是开发者",avatarUrl:"https://p3-passport.byteacctimg.com/img/user-avatar/52550b01fd44b51170eaae83e3bdba5c~120x120.awebp"}}},fe={id:"about",class:"py-20 bg-white"},ve={class:"container mx-auto px-4"},be={class:"max-w-6xl mx-auto"},ye={class:"flex flex-col md:flex-row items-center gap-12"},we={class:"w-full md:w-1/3 flex justify-center"},xe={class:"relative"},Se={class:"w-64 h-64 rounded-full overflow-hidden border-4 border-white shadow-xl"},Ae=["src"],_e={class:"w-full md:w-2/3"},ke={class:"text-2xl font-bold mb-4"};function Le(i,e,u,c,t,o){return n(),l("section",fe,[s("div",ve,[s("div",be,[e[3]||(e[3]=s("h2",{class:"text-[clamp(1.8rem,3vw,2.5rem)] font-bold text-center mb-16 relative"},[s("span",{class:"relative z-10"},"关于开发者"),s("span",{class:"absolute bottom-2 left-1/2 -translate-x-1/2 w-24 h-3 bg-primary/20 -z-10 rounded-full"})],-1)),s("div",ye,[s("div",we,[s("div",xe,[s("div",Se,[s("img",{src:t.avatarUrl,alt:"博主头像",class:"w-full h-full object-cover"},null,8,Ae)]),e[0]||(e[0]=s("div",{class:"absolute -bottom-4 -right-4 bg-secondary text-white rounded-full w-16 h-16 flex items-center justify-center shadow-lg"},[s("i",{class:"fa fa-code text-2xl","aria-hidden":"true"})],-1))])]),s("div",_e,[s("h3",ke,d(t.greeting),1),e[1]||(e[1]=s("p",{class:"text-gray-600 mb-4 leading-relaxed"}," 一名热爱技术与写作的软件工程师，对Web技术、用户体验和交互设计有着浓厚的兴趣。 ",-1)),e[2]||(e[2]=s("p",{class:"text-gray-600 mb-6 leading-relaxed"}," 这个博格是记录学习心得、分享技术见解和生活感悟的地方。 ",-1))])])])])])}const Ue=f(he,[["render",Le],["__scopeId","data-v-8a002b69"]]),Ie={name:"BlogIntro",data(){return{blogCategories:[{id:1,title:"技术分享",description:"前端开发技术、框架使用心得、编程技巧和解决方案",icon:"fa-laptop",bgColor:"bg-blue-100",textColor:"text-primary"},{id:2,title:"学习笔记",description:"新技术学习过程中的笔记、总结和思考",icon:"fa-book",bgColor:"bg-green-100",textColor:"text-secondary"},{id:3,title:"生活感悟",description:"旅行见闻、阅读感悟和生活中的思考与体会",icon:"fa-lightbulb-o",bgColor:"bg-purple-100",textColor:"text-purple-500"}]}}},Me={id:"blog",class:"py-20 bg-gray-50"},Ce={class:"container mx-auto px-4"},Fe={class:"grid grid-cols-1 md:grid-cols-3 gap-8 max-w-6xl mx-auto"},Te={class:"text-xl font-bold mb-3"},Pe={class:"text-gray-600"};function Oe(i,e,u,c,t,o){return n(),l("section",Me,[s("div",Ce,[e[0]||(e[0]=s("div",{class:"max-w-3xl mx-auto text-center"},[s("h2",{class:"text-[clamp(1.8rem,3vw,2.5rem)] font-bold mb-6"},"博格简介"),s("p",{class:"text-gray-600 mb-12 leading-relaxed"}," 这个博格创建于2025年，主要分享以下内容： ")],-1)),s("div",Fe,[(n(!0),l(y,null,w(t.blogCategories,r=>(n(),l("div",{key:r.id,class:"bg-white p-8 rounded-xl shadow-md hover:shadow-lg transition-custom transform hover:-translate-y-1"},[s("div",{class:p(["w-14 h-14",r.bgColor,"rounded-full flex items-center justify-center mb-6"])},[s("i",{class:p(["fa",r.icon,r.textColor,"text-2xl"]),"aria-hidden":"true"},null,2)],2),s("h3",Te,d(r.title),1),s("p",Pe,d(r.description),1)]))),128))])])])}const Ne=f(Ie,[["render",Oe],["__scopeId","data-v-4bf4efc4"]]),Ve={name:"Articles",data(){return{articles:[],displayedArticles:[],isLoading:!1,showModal:!1,selectedArticle:null,currentPage:1,pageSize:6,featuredSettings:{displayCount:3,featuredArticles:[]}}},mounted(){setTimeout(()=>{this.fetchArticles(),this.loadFeaturedSettings()},100),window.addEventListener("storage",this.handleStorageChange)},beforeUnmount(){window.removeEventListener("storage",this.handleStorageChange)},watch:{articles(){this.applyFeaturedSettings()},featuredSettings(){this.applyFeaturedSettings()}},methods:{loadFeaturedSettings(){try{const i=localStorage.getItem("featuredArticlesSettings");i&&(this.featuredSettings=JSON.parse(i))}catch(i){console.error("加载最新文章设置失败:",i)}},applyFeaturedSettings(){let i=[...this.articles].filter(c=>c.approvalStatus==="approved"||!c.approvalStatus);const e=[],u=[];i.forEach(c=>{this.featuredSettings.featuredArticles.includes(c.id)?e.push(c):u.push(c)}),e.sort((c,t)=>{const o=this.featuredSettings.featuredArticles.indexOf(c.id),r=this.featuredSettings.featuredArticles.indexOf(t.id);return o-r}),this.displayedArticles=[...e,...u].slice(0,this.featuredSettings.displayCount)},async fetchArticles(){const i=`articles_cache_page_${this.currentPage}`,e=localStorage.getItem(i),u=localStorage.getItem(`${i}_timestamp`),c=5*60*1e3;if(e&&u&&Date.now()-u<c&&this.currentPage===1){const t=JSON.parse(e);this.articles=t,this.applyFeaturedSettings();return}this.isLoading=!0;try{const t=await fetch(`/api/articles?page=${this.currentPage}&pageSize=${this.pageSize}`);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const a=((await t.json()).articles||[]).map(v=>({id:v._id,title:v.title,summary:v.summary,content:v.content,category:v.category,date:new Date(v.createdAt).toLocaleDateString("zh-CN"),approvalStatus:v.approvalStatus||"approved"})).filter(v=>v.approvalStatus==="approved"||!v.approvalStatus);this.currentPage===1?(this.articles=a,localStorage.setItem(i,JSON.stringify(a)),localStorage.setItem(`${i}_timestamp`,Date.now().toString())):this.articles.push(...a),this.applyFeaturedSettings()}catch(t){console.error("获取文章失败:",t)}finally{this.isLoading=!1}},loadMoreArticles(){this.isLoading||(this.currentPage++,this.fetchArticles())},showArticleDetail(i){this.selectedArticle=i,this.showModal=!0,document.body.style.overflow="hidden"},closeModal(){this.showModal=!1,this.selectedArticle=null,document.body.style.overflow=""},handleStorageChange(i){document.visibilityState==="visible"&&(i.key==="featuredArticlesSettings"?(this.loadFeaturedSettings(),this.applyFeaturedSettings()):i.key==="articles"&&(this._debounceTimer&&clearTimeout(this._debounceTimer),this._debounceTimer=setTimeout(()=>{this.currentPage=1,localStorage.removeItem("articles_cache_page_1"),localStorage.removeItem("articles_cache_page_1_timestamp"),this.fetchArticles()},300)))}}},De={id:"articles",class:"py-20 bg-white"},je={class:"container mx-auto px-4"},Ee={class:"max-w-6xl mx-auto py-8"},Be={key:0,class:"text-center py-16"},Je={key:1,class:"text-center py-16"},ze={key:2,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 mt-8"},Re={class:"p-6"},He={class:"inline-block bg-primary/10 text-primary text-xs px-3 py-1 rounded-full mb-3"},qe={class:"text-xl font-bold mb-2"},Ke={class:"text-gray-500 text-sm mb-4"},Ye={class:"text-gray-600 mb-4 line-clamp-3"},We=["onClick"],Ge={class:"text-center mt-12"},Qe=["disabled"],Xe={key:0,class:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50"},Ze={class:"bg-white rounded-lg max-w-3xl w-full max-h-[90vh] overflow-auto"},$e={class:"p-6"},es={class:"flex justify-between items-center mb-4"},ss={class:"text-2xl font-bold"},ts={class:"flex items-center text-sm text-gray-500 mb-4"},rs={class:"bg-primary/10 text-primary px-3 py-1 rounded-full mr-3"},os={class:"text-gray-700 whitespace-pre-line"};function is(i,e,u,c,t,o){return n(),l("section",De,[s("div",je,[e[4]||(e[4]=s("h2",{class:"text-[clamp(1.8rem,3vw,2.5rem)] font-bold text-center mb-16 relative"},[s("span",{class:"relative z-10"},"最新文章"),s("span",{class:"absolute bottom-2 left-1/2 -translate-x-1/2 w-24 h-3 bg-primary/20 -z-10 rounded-full"})],-1)),s("div",Ee,[t.isLoading?(n(),l("div",Be,[...e[2]||(e[2]=[s("p",{class:"text-gray-500"},"加载中...",-1)])])):t.articles.length===0?(n(),l("div",Je,[...e[3]||(e[3]=[s("p",{class:"text-gray-500"},"暂无文章",-1)])])):(n(),l("div",ze,[(n(!0),l(y,null,w(t.displayedArticles,r=>(n(),l("div",{key:r.id,class:p(["bg-gray-50 rounded-lg overflow-hidden shadow hover:shadow-md transition-shadow",{"featured-article":t.featuredSettings.featuredArticles.includes(r.id)}])},[s("div",Re,[s("span",He,d(r.category),1),s("h3",qe,d(r.title),1),s("p",Ke,d(r.date),1),s("p",Ye,d(r.summary),1),s("button",{onClick:a=>o.showArticleDetail(r),class:"text-primary hover:underline font-medium"},"阅读更多",8,We)])],2))),128))]))]),s("div",Ge,[s("button",{onClick:e[0]||(e[0]=(...r)=>o.loadMoreArticles&&o.loadMoreArticles(...r)),class:"inline-block border-2 border-primary text-primary hover:bg-primary hover:text-white font-medium px-8 py-3 rounded-full transition-custom",disabled:t.isLoading},d(t.isLoading?"加载中...":"查看更多"),9,Qe)])]),t.showModal?(n(),l("div",Xe,[s("div",Ze,[s("div",$e,[s("div",es,[s("h3",ss,d(t.selectedArticle.title),1),s("button",{onClick:e[1]||(e[1]=(...r)=>o.closeModal&&o.closeModal(...r)),class:"text-gray-500 hover:text-gray-700"},[...e[5]||(e[5]=[s("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),s("div",ts,[s("span",rs,d(t.selectedArticle.category),1),s("span",null,d(t.selectedArticle.date),1)]),s("div",os,d(t.selectedArticle.content||t.selectedArticle.summary),1)])])])):g("",!0)])}const ns=f(Ve,[["render",is],["__scopeId","data-v-365512fa"]]),ls={name:"ArticleForm",data(){return{article:{title:"",category:"",summary:"",content:""},isSubmitting:!1}},methods:{async submitArticle(){this.isSubmitting=!0;try{const i=await fetch("/api/articles",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.article)});if(!i.ok)throw new Error(`HTTP error! status: ${i.status}`);alert("文章发布成功！"),this.article={title:"",category:"",summary:"",content:""},this.$emit("articlePublished")}catch(i){console.error("发布文章失败:",i),alert("发布失败，请重试")}finally{this.isSubmitting=!1}}}},as={id:"article-form",class:"py-20 bg-gray-50"},ds={class:"container mx-auto px-4"},us={class:"max-w-3xl mx-auto bg-white p-8 rounded-lg shadow"},cs={class:"mb-6"},ms={class:"mb-6"},gs={class:"mb-6"},ps={class:"mb-8"},hs={class:"text-center"},fs=["disabled"];function vs(i,e,u,c,t,o){return n(),l("section",as,[s("div",ds,[e[10]||(e[10]=s("h2",{class:"text-[clamp(1.8rem,3vw,2.5rem)] font-bold text-center mb-16 relative"},[s("span",{class:"relative z-10"},"发布文章"),s("span",{class:"absolute bottom-2 left-1/2 -translate-x-1/2 w-24 h-3 bg-primary/20 -z-10 rounded-full"})],-1)),s("div",us,[s("form",{onSubmit:e[4]||(e[4]=U((...r)=>o.submitArticle&&o.submitArticle(...r),["prevent"]))},[s("div",cs,[e[5]||(e[5]=s("label",{for:"title",class:"block text-gray-700 font-medium mb-2"},"文章标题",-1)),m(s("input",{type:"text",id:"title","onUpdate:modelValue":e[0]||(e[0]=r=>t.article.title=r),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/50",placeholder:"请输入文章标题",required:""},null,512),[[h,t.article.title]])]),s("div",ms,[e[7]||(e[7]=s("label",{for:"category",class:"block text-gray-700 font-medium mb-2"},"文章分类",-1)),m(s("select",{id:"category","onUpdate:modelValue":e[1]||(e[1]=r=>t.article.category=r),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/50",required:""},[...e[6]||(e[6]=[s("option",{value:""},"请选择分类",-1),s("option",{value:"技术"},"技术",-1),s("option",{value:"生活"},"生活",-1),s("option",{value:"经验分享"},"经验分享",-1)])],512),[[A,t.article.category]])]),s("div",gs,[e[8]||(e[8]=s("label",{for:"summary",class:"block text-gray-700 font-medium mb-2"},"文章摘要",-1)),m(s("textarea",{id:"summary","onUpdate:modelValue":e[2]||(e[2]=r=>t.article.summary=r),rows:"3",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/50",placeholder:"请输入文章摘要",required:""},null,512),[[h,t.article.summary]])]),s("div",ps,[e[9]||(e[9]=s("label",{for:"content",class:"block text-gray-700 font-medium mb-2"},"文章内容",-1)),m(s("textarea",{id:"content","onUpdate:modelValue":e[3]||(e[3]=r=>t.article.content=r),rows:"8",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/50",placeholder:"请输入文章内容",required:""},null,512),[[h,t.article.content]])]),s("div",hs,[s("button",{type:"submit",class:"inline-block bg-primary text-white font-medium px-8 py-3 rounded-full transition-custom hover:bg-primary/90",disabled:t.isSubmitting},d(t.isSubmitting?"提交中...":"发布文章"),9,fs)])],32)])])])}const bs=f(ls,[["render",vs],["__scopeId","data-v-6c3a05bb"]]),ys={name:"Contact",data(){return{socialLinks:[{id:1,name:"GitHub",icon:"fa-github",url:"https://github.com/Lensi-zhang"},{id:2,name:"稀土掘金",icon:"fa-book",url:"https://juejin.cn/user/1180188819589920?share_token=ceb3875a-8952-43e1-94e5-346d5043d530"},{id:3,name:"程序员客栈",icon:"fa-briefcase",url:"https://www.proginn.com/u/1138328"}]}}},ws={id:"contact",class:"py-20 bg-gradient-to-br from-primary/5 to-secondary/5"},xs={class:"container mx-auto px-4"},Ss={class:"max-w-3xl mx-auto text-center"},As={class:"flex flex-wrap justify-center gap-10"},_s=["href"],ks={class:"font-bold text-gray-700"};function Ls(i,e,u,c,t,o){return n(),l("section",ws,[s("div",xs,[s("div",Ss,[e[0]||(e[0]=s("h2",{class:"text-[clamp(1.8rem,3vw,2.5rem)] font-bold mb-6"},"联系开发者",-1)),e[1]||(e[1]=s("p",{class:"text-gray-600 mb-12"}," 如果你有任何问题、建议或者合作意向，欢迎通过以下方式联系开发者 ",-1)),s("div",As,[(n(!0),l(y,null,w(t.socialLinks,r=>(n(),l("div",{key:r.id,class:"flex flex-col items-center"},[s("a",{href:r.url,class:"w-14 h-14 bg-white rounded-full flex items-center justify-center shadow-md hover:shadow-lg transition-custom text-gray-600 hover:text-primary mb-3",target:"_blank",rel:"noopener noreferrer"},[s("i",{class:p(["fa",r.icon,"text-2xl"]),"aria-hidden":"true"},null,2)],8,_s),s("span",ks,d(r.name),1)]))),128))])])])])}const Us=f(ys,[["render",Ls],["__scopeId","data-v-af367384"]]),Is={name:"Footer",data(){return{currentYear:new Date().getFullYear()}}},Ms={class:"bg-dark text-white py-12"},Cs={class:"container mx-auto px-4"},Fs={class:"max-w-6xl mx-auto"},Ts={class:"border-t border-gray-700 pt-8 text-center text-gray-400"};function Ps(i,e,u,c,t,o){return n(),l("footer",Ms,[s("div",Cs,[s("div",Fs,[e[0]||(e[0]=I('<div class="flex flex-col md:flex-row justify-between items-center mb-8" data-v-6e6c45e7><a href="#" class="text-2xl font-bold mb-4 md:mb-0 flex items-center gap-2" data-v-6e6c45e7><i class="fa fa-pencil-square-o" aria-hidden="true" data-v-6e6c45e7></i><span data-v-6e6c45e7>Boge</span></a><div class="flex gap-6" data-v-6e6c45e7><a href="#about" class="text-gray-300 hover:text-white transition-custom" data-v-6e6c45e7>关于开发者</a><a href="#blog" class="text-gray-300 hover:text-white transition-custom" data-v-6e6c45e7>博格简介</a><a href="#articles" class="text-gray-300 hover:text-white transition-custom" data-v-6e6c45e7>文章</a><a href="#contact" class="text-gray-300 hover:text-white transition-custom" data-v-6e6c45e7>联系开发者</a></div></div>',1)),s("div",Ts,[s("p",null,"© "+d(t.currentYear)+" Boge. 保留所有权利.",1)])])])])}const Os=f(Is,[["render",Ps],["__scopeId","data-v-6e6c45e7"]]),Ns={name:"BackToTop",data(){return{showButton:!1}},mounted(){window.addEventListener("scroll",this.handleScroll)},beforeUnmount(){window.removeEventListener("scroll",this.handleScroll)},methods:{handleScroll(){this.showButton=window.scrollY>300},scrollToTop(){window.scrollTo({top:0,behavior:"smooth"})}}};function Vs(i,e,u,c,t,o){return n(),l("button",{id:"backToTop",class:p(["fixed bottom-8 right-8 bg-primary text-white w-12 h-12 rounded-full flex items-center justify-center shadow-lg transition-custom z-50",{"opacity-0 invisible":!t.showButton,"opacity-100 visible":t.showButton}]),onClick:e[0]||(e[0]=(...r)=>o.scrollToTop&&o.scrollToTop(...r))},[...e[1]||(e[1]=[s("i",{class:"fa fa-arrow-up","aria-hidden":"true"},null,-1)])],2)}const Ds=f(Ns,[["render",Vs],["__scopeId","data-v-f55670ef"]]),js={name:"AdminLogin",data(){return{username:"",password:"",isLoading:!1,focusedField:""}},mounted(){localStorage.getItem("adminLoggedIn")==="true"&&this.$router.push("/admin/dashboard"),localStorage.getItem("userLoggedIn")==="true"&&this.showPermissionAlert&&setTimeout(()=>{alert("你没有管理权限")},500)},props:{showPermissionAlert:{type:Boolean,default:!0}},methods:{async handleLogin(){if(!this.username||!this.password){alert("请输入用户名和密码");return}this.isLoading=!0;try{let i=!1,e="";const u=localStorage.getItem("adminUsers");let c=[];if(u)try{c=JSON.parse(u)}catch(o){console.error("解析用户列表失败:",o)}c.length===0&&(c=[{username:"superadmin",role:"super_admin"},{username:"admin",role:"admin"}]);const t=c.find(o=>o.username===this.username);if(t){const o=localStorage.getItem(`password_${t.username}`)||"admin";this.password===o&&(i=!0,e=t.role)}if(i)localStorage.setItem("adminLoggedIn","true"),localStorage.setItem("adminRole",e),localStorage.setItem("adminUsername",this.username),this.$emit("login-success");else throw new Error("用户名或密码错误")}catch(i){alert(i.message||"登录失败，请重试")}finally{this.isLoading=!1}}}},Es={class:"admin-login-container"},Bs={class:"form-group"},Js={class:"input-wrapper"},zs={class:"form-group"},Rs={class:"input-wrapper"},Hs=["disabled"],qs={key:0,class:"fa fa-spinner fa-spin","aria-hidden":"true"};function Ks(i,e,u,c,t,o){return n(),l("div",Es,[s("div",{class:"login-form",onKeyup:e[9]||(e[9]=L((...r)=>i.handleEscape&&i.handleEscape(...r),["esc"])),style:{position:"relative","z-index":"1"}},[e[14]||(e[14]=s("div",{class:"login-header"},[s("div",{class:"logo"},[s("i",{class:"fa fa-pencil-square-o","aria-hidden":"true"}),s("span",null,"Boge")]),s("h2",null,"网站管理控制端")],-1)),s("div",Bs,[e[11]||(e[11]=s("label",{for:"username"},"用户名",-1)),s("div",Js,[e[10]||(e[10]=s("i",{class:"fa fa-user","aria-hidden":"true"},null,-1)),m(s("input",{type:"text",id:"username","onUpdate:modelValue":e[0]||(e[0]=r=>t.username=r),placeholder:"请输入用户名",onKeyup:e[1]||(e[1]=L((...r)=>o.handleLogin&&o.handleLogin(...r),["enter"])),onFocus:e[2]||(e[2]=r=>t.focusedField="username"),onBlur:e[3]||(e[3]=r=>t.focusedField="")},null,544),[[h,t.username]])])]),s("div",zs,[e[13]||(e[13]=s("label",{for:"password"},"密码",-1)),s("div",Rs,[e[12]||(e[12]=s("i",{class:"fa fa-lock","aria-hidden":"true"},null,-1)),m(s("input",{type:"password",id:"password","onUpdate:modelValue":e[4]||(e[4]=r=>t.password=r),placeholder:"请输入密码",onKeyup:e[5]||(e[5]=L((...r)=>o.handleLogin&&o.handleLogin(...r),["enter"])),onFocus:e[6]||(e[6]=r=>t.focusedField="password"),onBlur:e[7]||(e[7]=r=>t.focusedField="")},null,544),[[h,t.password]])])]),s("button",{class:p(["login-button",{loading:t.isLoading}]),onClick:e[8]||(e[8]=(...r)=>o.handleLogin&&o.handleLogin(...r)),disabled:t.isLoading},[t.isLoading?(n(),l("i",qs)):g("",!0),M(" "+d(t.isLoading?"登录中...":"登录"),1)],10,Hs)],32)])}const Ys=f(js,[["render",Ks],["__scopeId","data-v-4bd63580"]]),Ws={name:"AdminPanel",data(){return{activeTab:"navigation",isSuperAdmin:!1,currentUsername:"",navigationItems:[{id:"about",name:"关于开发者",visible:!0},{id:"blog",name:"博格简介",visible:!0},{id:"articles",name:"文章",visible:!0},{id:"contact",name:"联系开发者",visible:!0}],isSaving:!1,saveMessage:"",saveMessageType:"success",featuredSettings:{displayCount:3,featuredArticles:[]},articleForm:{title:"",category:"tech",summary:"",content:"",approvalStatus:"pending",author:""},articles:[],searchTerm:"",passwordForm:{currentPassword:"",newPassword:"",confirmPassword:""},passwordMessage:"",passwordMessageType:"success",users:[{username:"superadmin",role:"super_admin"},{username:"admin",role:"admin"}],newUserForm:{username:"",password:"",role:"admin"},userError:"",userMessage:"",hoveredArticleId:null,approvalFilter:"pending",approvalMessage:"",approvalMessageType:""}},computed:{filteredArticles(){return this.articles.filter(i=>i.title.toLowerCase().includes(this.searchTerm.toLowerCase()))},filteredApprovalArticles(){return this.approvalFilter==="all"?this.articles:this.articles.filter(i=>i.approvalStatus===this.approvalFilter)}},mounted(){const i=localStorage.getItem("adminLoggedIn")==="true";if(localStorage.getItem("userLoggedIn")==="true"&&!i){setTimeout(()=>{alert("你没有管理权限"),window.location.href="/"},100);return}if(!i){window.location.href="/admin-login";return}this.isSuperAdmin=localStorage.getItem("adminRole")==="super_admin",this.currentUsername=localStorage.getItem("adminUsername")||"",this.loadNavigationSettings(),this.fetchArticles(),this.loadFeaturedSettings(),this.isSuperAdmin&&this.loadUsersFromStorage()},methods:{handleLogout(){localStorage.removeItem("adminLoggedIn"),localStorage.removeItem("adminRole"),localStorage.removeItem("adminUsername"),window.location.href="/admin-login"},handlePasswordUpdate(){const i=localStorage.getItem(`password_${this.currentUsername}`)||"admin";if(this.passwordForm.currentPassword!==i){this.passwordMessage="当前密码错误",this.passwordMessageType="error";return}if(this.passwordForm.newPassword.length<4){this.passwordMessage="新密码长度至少为4个字符",this.passwordMessageType="error";return}if(this.passwordForm.newPassword!==this.passwordForm.confirmPassword){this.passwordMessage="两次输入的新密码不一致",this.passwordMessageType="error";return}localStorage.setItem(`password_${this.currentUsername}`,this.passwordForm.newPassword),this.passwordMessage="密码更新成功",this.passwordMessageType="success",this.passwordForm={currentPassword:"",newPassword:"",confirmPassword:""},setTimeout(()=>{this.passwordMessage=""},2e3)},handleAddUser(){if(this.userError="",this.userMessage="",this.users.some(e=>e.username===this.newUserForm.username)){this.userError="用户名已存在";return}if(!this.newUserForm.username||this.newUserForm.username.trim().length===0){this.userError="用户名不能为空";return}if(!this.newUserForm.password||this.newUserForm.password.length<4){this.userError="密码长度至少为4个字符";return}const i={username:this.newUserForm.username,role:this.newUserForm.role};this.users.push(i),this.saveUsersToStorage(),localStorage.setItem(`password_${i.username}`,this.newUserForm.password),this.userMessage="用户添加成功",this.newUserForm={username:"",password:"",role:"admin"}},handleDeleteUser(i){if(confirm(`确定要删除用户 ${i} 吗？`)){const e=this.users.find(t=>t.username===i),u=e?e.role:null;this.users=this.users.filter(t=>t.username!==i);const c=this.users.filter(t=>t.role==="admin"||t.role==="super_admin");if(localStorage.setItem("adminUsers",JSON.stringify(c)),u==="user"){const t=localStorage.getItem("normalUsers");if(t){const o=JSON.parse(t).filter(r=>r.username!==i);localStorage.setItem("normalUsers",JSON.stringify(o))}}localStorage.removeItem(`password_${i}`),this.userMessage="用户删除成功",setTimeout(()=>{this.userMessage=""},2e3)}},saveUsersToStorage(){const i=this.users.filter(e=>e.role==="admin"||e.role==="super_admin");localStorage.setItem("adminUsers",JSON.stringify(i))},loadUsersFromStorage(){try{let i=[];const e=localStorage.getItem("adminUsers");e?i=[...JSON.parse(e)]:i=[{username:"superadmin",role:"super_admin"},{username:"admin",role:"admin"}];const u=localStorage.getItem("normalUsers");u&&JSON.parse(u).forEach(t=>{i.some(o=>o.username===t.username)||i.push({username:t.username,role:"user"})}),this.users=i}catch(i){console.error("加载用户列表失败:",i),this.users=[{username:"superadmin",role:"super_admin"},{username:"admin",role:"admin"}]}},async loadNavigationSettings(){try{const i=localStorage.getItem("navigationSettings");i&&(this.navigationItems=JSON.parse(i))}catch(i){console.error("加载导航设置失败:",i)}},async loadFeaturedSettings(){try{const i=localStorage.getItem("featuredArticlesSettings");i&&(this.featuredSettings=JSON.parse(i))}catch(i){console.error("加载最新文章设置失败:",i)}},async saveFeaturedSettings(){this.isSaving=!0,this.saveMessage="";try{localStorage.setItem("featuredArticlesSettings",JSON.stringify(this.featuredSettings)),this.saveMessage="最新文章设置保存成功",this.saveMessageType="success"}catch(i){this.saveMessage="保存失败，请重试",this.saveMessageType="error",console.error("保存最新文章设置失败:",i)}finally{setTimeout(()=>{this.isSaving=!1,this.saveMessage=""},2e3)}},toggleFeaturedArticle(i){const e=this.featuredSettings.featuredArticles.indexOf(i);e>-1?this.featuredSettings.featuredArticles.splice(e,1):this.featuredSettings.featuredArticles.push(i)},async saveNavigationSettings(){this.isSaving=!0,this.saveMessage="";try{localStorage.setItem("navigationSettings",JSON.stringify(this.navigationItems)),this.saveMessage="导航配置保存成功",this.saveMessageType="success",this.$emit("navigation-updated",this.navigationItems)}catch(i){this.saveMessage="保存失败，请重试",this.saveMessageType="error",console.error("保存导航设置失败:",i)}finally{setTimeout(()=>{this.isSaving=!1,this.saveMessage=""},2e3)}},toggleNavItemVisibility(i){const e=this.navigationItems.find(u=>u.id===i);e&&(e.visible=!e.visible)},async fetchArticles(){try{const i=localStorage.getItem("articles");i&&(this.articles=JSON.parse(i),this.articles=this.articles.map(e=>({...e,approvalStatus:e.approvalStatus||"pending",author:e.author||"管理员"})))}catch(i){console.error("获取文章列表失败:",i)}},async submitArticle(){if(!this.articleForm.title||!this.articleForm.content){alert("请填写标题和内容");return}try{const i={id:Date.now(),title:this.articleForm.title,category:this.articleForm.category,summary:this.articleForm.summary,content:this.articleForm.content,uploadTime:new Date().toLocaleString(),approvalStatus:"pending",author:this.articleForm.author||"管理员"};this.articles.push(i),localStorage.setItem("articles",JSON.stringify(this.articles)),this.articleForm={title:"",category:"tech",summary:"",content:"",author:""},alert("文章提交成功")}catch(i){console.error("提交文章失败:",i),alert("提交失败，请重试")}},editArticle(i){alert("编辑功能待实现")},deleteArticle(i){confirm("确定要删除这篇文章吗？")&&(this.articles=this.articles.filter(e=>e.id!==i),localStorage.setItem("articles",JSON.stringify(this.articles)))},approveArticle(i){const e=this.articles.find(u=>u.id===i);e&&(e.approvalStatus="approved",localStorage.setItem("articles",JSON.stringify(this.articles)),this.approvalMessage="文章已批准",this.approvalMessageType="success",setTimeout(()=>{this.approvalMessage=""},3e3))},rejectArticle(i){const e=this.articles.find(u=>u.id===i);e&&(e.approvalStatus="rejected",localStorage.setItem("articles",JSON.stringify(this.articles)),this.approvalMessage="文章已拒绝",this.approvalMessageType="error",setTimeout(()=>{this.approvalMessage=""},3e3))},resetArticleStatus(i){const e=this.articles.find(u=>u.id===i);e&&(e.approvalStatus="pending",localStorage.setItem("articles",JSON.stringify(this.articles)),this.approvalMessage="文章状态已重置为待审批",this.approvalMessageType="info",setTimeout(()=>{this.approvalMessage=""},3e3))}}},Gs={class:"admin-panel"},Qs={class:"top-navbar"},Xs={class:"nav-right"},Zs={class:"user-info"},$s={key:0,class:"role-badge super-admin"},et={key:1,class:"role-badge admin"},st={class:"admin-content"},tt={class:"sidebar"},rt={class:"nav-menu"},ot={class:"main-content"},it={key:0,class:"tab-content"},nt={class:"navigation-settings"},lt={class:"nav-item-info"},at={class:"nav-item-details"},dt={class:"nav-item-name"},ut={class:"nav-item-id"},ct={class:"switch"},mt=["onUpdate:modelValue","onChange"],gt=["disabled"],pt={key:1,class:"tab-content"},ht={class:"approval-settings"},ft={class:"form-group"},vt={class:"articles-list"},bt={key:0,class:"empty-message"},yt={key:1,class:"approval-articles-grid"},wt={class:"article-header"},xt={class:"article-title"},St={class:"article-meta"},At={key:0},_t={class:"article-summary"},kt={class:"approval-actions"},Lt=["onClick","disabled"],Ut=["onClick","disabled"],It=["onClick"],Mt={key:2,class:"tab-content"},Ct={class:"featured-settings"},Ft={class:"form-group"},Tt={class:"featured-articles-list"},Pt={key:0,class:"empty-message"},Ot={key:1,class:"articles-grid"},Nt={class:"article-checkbox"},Vt=["checked","onChange"],Dt={class:"article-info"},jt={class:"article-title"},Et={class:"article-meta"},Bt=["disabled"],Jt={class:"article-upload-form"},zt={class:"form-group"},Rt={class:"form-group"},Ht={class:"form-group"},qt={class:"form-group"},Kt={class:"form-group"},Yt={class:"articles-list"},Wt={class:"search-box"},Gt={class:"articles-table"},Qt={class:"article-title"},Xt=["onClick"],Zt=["onClick","onMouseenter"],$t={key:3,class:"tab-content"},er={class:"admin-settings-content"},sr={class:"settings-section"},tr={class:"form-group"},rr={class:"form-group"},or={class:"form-group"},ir={key:4,class:"tab-content"},nr={class:"user-management-content"},lr={class:"add-user-form"},ar={class:"form-group"},dr={class:"form-group"},ur={class:"form-group"},cr={key:0,class:"error-message"},mr={key:1,class:"success-message"},gr={class:"user-list"},pr={class:"users-table"},hr={key:0,class:"role-badge super-admin"},fr={key:1,class:"role-badge admin"},vr={key:2,class:"role-badge user"},br=["onClick"],yr={key:1,class:"disabled-text"};function wr(i,e,u,c,t,o){return n(),l("div",Gs,[s("div",Qs,[e[26]||(e[26]=s("div",{class:"nav-left"},[s("h1",null,"后台管理系统")],-1)),s("div",Xs,[s("span",Zs,[M(" 欢迎, "+d(t.currentUsername)+" ",1),t.isSuperAdmin?(n(),l("span",$s,"超级管理员")):(n(),l("span",et,"管理员"))]),s("button",{class:"logout-btn",onClick:e[0]||(e[0]=(...r)=>o.handleLogout&&o.handleLogout(...r))},"退出登录")])]),s("div",st,[s("div",tt,[s("ul",rt,[s("li",{class:p({active:t.activeTab==="navigation"}),onClick:e[1]||(e[1]=r=>t.activeTab="navigation")},[...e[27]||(e[27]=[s("span",{class:"nav-icon"},"📋",-1),s("span",null,"导航管理",-1)])],2),s("li",{class:p({active:t.activeTab==="articles"}),onClick:e[2]||(e[2]=r=>t.activeTab="articles")},[...e[28]||(e[28]=[s("span",{class:"nav-icon"},"📝",-1),s("span",null,"文章管理",-1)])],2),s("li",{class:p({active:t.activeTab==="articleApproval"}),onClick:e[3]||(e[3]=r=>t.activeTab="articleApproval")},[...e[29]||(e[29]=[s("span",{class:"nav-icon"},"✅",-1),s("span",null,"文章审批",-1)])],2),s("li",{class:p({active:t.activeTab==="adminSettings"}),onClick:e[4]||(e[4]=r=>t.activeTab="adminSettings")},[...e[30]||(e[30]=[s("span",{class:"nav-icon"},"🔐",-1),s("span",null,"账户设置",-1)])],2),t.isSuperAdmin?(n(),l("li",{key:0,class:p({active:t.activeTab==="userManagement"}),onClick:e[5]||(e[5]=r=>t.activeTab="userManagement")},[...e[31]||(e[31]=[s("span",{class:"nav-icon"},"👥",-1),s("span",null,"用户管理",-1)])],2)):g("",!0)])]),s("div",ot,[t.activeTab==="navigation"?(n(),l("div",it,[e[33]||(e[33]=s("div",{class:"section-header"},[s("h2",null,"导航栏配置"),s("p",null,"管理网站导航栏中显示的各个模块")],-1)),s("div",nt,[(n(!0),l(y,null,w(t.navigationItems,r=>(n(),l("div",{key:r.id,class:"nav-item-config"},[s("div",lt,[s("div",at,[s("span",dt,d(r.name),1),s("span",ut,"ID: "+d(r.id),1)]),s("label",ct,[m(s("input",{type:"checkbox","onUpdate:modelValue":a=>r.visible=a,onChange:a=>o.toggleNavItemVisibility(r.id)},null,40,mt),[[j,r.visible]]),e[32]||(e[32]=s("span",{class:"slider round"},null,-1))])])]))),128)),s("button",{class:"save-btn",onClick:e[6]||(e[6]=(...r)=>o.saveNavigationSettings&&o.saveNavigationSettings(...r)),disabled:t.isSaving},d(t.isSaving?"保存中...":"保存设置"),9,gt),t.saveMessage?(n(),l("div",{key:0,class:p(["save-message",t.saveMessageType])},d(t.saveMessage),3)):g("",!0)])])):g("",!0),t.activeTab==="articleApproval"?(n(),l("div",pt,[e[37]||(e[37]=s("div",{class:"section-header"},[s("h2",null,"文章审批"),s("p",null,"审批用户上传的文章，决定是否适合展示")],-1)),s("div",ht,[s("div",ft,[e[35]||(e[35]=s("label",{for:"approvalFilter"},"筛选文章",-1)),m(s("select",{id:"approvalFilter","onUpdate:modelValue":e[7]||(e[7]=r=>t.approvalFilter=r)},[...e[34]||(e[34]=[s("option",{value:"pending"},"待审批",-1),s("option",{value:"approved"},"已通过",-1),s("option",{value:"rejected"},"已拒绝",-1),s("option",{value:"all"},"全部文章",-1)])],512),[[A,t.approvalFilter]])]),s("div",vt,[e[36]||(e[36]=s("h3",null,"待审批文章",-1)),o.filteredApprovalArticles.length===0?(n(),l("div",bt," 暂无"+d(t.approvalFilter==="pending"?"待审批":t.approvalFilter==="approved"?"已通过":t.approvalFilter==="rejected"?"已拒绝":"")+"文章 ",1)):(n(),l("div",yt,[(n(!0),l(y,null,w(o.filteredApprovalArticles,r=>(n(),l("div",{key:r.id,class:p(["approval-article-item",{"status-pending":r.approvalStatus==="pending","status-approved":r.approvalStatus==="approved","status-rejected":r.approvalStatus==="rejected"}])},[s("div",wt,[s("h4",xt,d(r.title),1),s("span",{class:p(["approval-status","status-"+(r.approvalStatus||"pending")])},d(r.approvalStatus==="pending"?"待审批":r.approvalStatus==="approved"?"已通过":"已拒绝"),3)]),s("div",St,[s("span",null,d(r.category),1),s("span",null,d(r.uploadTime),1),r.author?(n(),l("span",At,"作者: "+d(r.author),1)):g("",!0)]),s("div",_t,d(r.summary||"暂无摘要"),1),s("div",kt,[s("button",{class:"approve-btn",onClick:a=>o.approveArticle(r.id),disabled:r.approvalStatus==="approved"}," 批准 ",8,Lt),s("button",{class:"reject-btn",onClick:a=>o.rejectArticle(r.id),disabled:r.approvalStatus==="rejected"}," 拒绝 ",8,Ut),s("button",{class:"reset-btn",onClick:a=>o.resetArticleStatus(r.id)}," 重置状态 ",8,It)])],2))),128))]))]),t.approvalMessage?(n(),l("div",{key:0,class:p(["approval-message",t.approvalMessageType])},d(t.approvalMessage),3)):g("",!0)])])):g("",!0),t.activeTab==="articles"?(n(),l("div",Mt,[e[53]||(e[53]=s("div",{class:"section-header"},[s("h2",null,"文章管理"),s("p",null,"管理网站的文章内容")],-1)),s("div",Ct,[e[42]||(e[42]=s("h3",null,"文章显示设置",-1)),e[43]||(e[43]=s("p",null,"设置首页显示的最新文章数量和置顶文章",-1)),s("div",Ft,[e[38]||(e[38]=s("label",{for:"displayCount"},"显示文章数量",-1)),m(s("input",{type:"number",id:"displayCount","onUpdate:modelValue":e[8]||(e[8]=r=>t.featuredSettings.displayCount=r),min:"1",max:"10",placeholder:"请输入显示数量"},null,512),[[h,t.featuredSettings.displayCount,void 0,{number:!0}]]),e[39]||(e[39]=s("small",null,"最多可显示10篇文章",-1))]),s("div",Tt,[e[40]||(e[40]=s("h3",null,"文章置顶设置",-1)),e[41]||(e[41]=s("p",null,"选择需要在首页优先显示的文章（置顶文章将按选择顺序显示）",-1)),t.articles.length===0?(n(),l("div",Pt," 暂无文章，请先添加文章 ")):(n(),l("div",Ot,[(n(!0),l(y,null,w(t.articles,r=>(n(),l("div",{key:r.id,class:"article-item"},[s("label",Nt,[s("input",{type:"checkbox",checked:t.featuredSettings.featuredArticles.includes(r.id),onChange:a=>o.toggleFeaturedArticle(r.id)},null,40,Vt),s("span",Dt,[s("span",jt,d(r.title),1),s("span",Et,d(r.category)+" · "+d(r.uploadTime),1)])])]))),128))]))]),s("button",{class:"save-btn",onClick:e[9]||(e[9]=(...r)=>o.saveFeaturedSettings&&o.saveFeaturedSettings(...r)),disabled:t.isSaving},d(t.isSaving?"保存中...":"保存设置"),9,Bt),t.saveMessage?(n(),l("div",{key:0,class:p(["save-message",t.saveMessageType])},d(t.saveMessage),3)):g("",!0)]),e[54]||(e[54]=s("hr",{class:"section-divider"},null,-1)),s("div",Jt,[e[50]||(e[50]=s("h3",null,"上传新文章",-1)),s("div",zt,[e[44]||(e[44]=s("label",{for:"articleTitle"},"文章标题",-1)),m(s("input",{type:"text",id:"articleTitle","onUpdate:modelValue":e[10]||(e[10]=r=>t.articleForm.title=r),placeholder:"请输入文章标题"},null,512),[[h,t.articleForm.title]])]),s("div",Rt,[e[46]||(e[46]=s("label",{for:"articleCategory"},"文章分类",-1)),m(s("select",{id:"articleCategory","onUpdate:modelValue":e[11]||(e[11]=r=>t.articleForm.category=r)},[...e[45]||(e[45]=[s("option",{value:"tech"},"技术",-1),s("option",{value:"life"},"生活",-1),s("option",{value:"travel"},"旅行",-1)])],512),[[A,t.articleForm.category]])]),s("div",Ht,[e[47]||(e[47]=s("label",{for:"articleSummary"},"文章摘要",-1)),m(s("textarea",{id:"articleSummary","onUpdate:modelValue":e[12]||(e[12]=r=>t.articleForm.summary=r),placeholder:"请输入文章摘要",rows:"3"},null,512),[[h,t.articleForm.summary]])]),s("div",qt,[e[48]||(e[48]=s("label",{for:"articleAuthor"},"作者",-1)),m(s("input",{type:"text",id:"articleAuthor","onUpdate:modelValue":e[13]||(e[13]=r=>t.articleForm.author=r),placeholder:"请输入作者名称"},null,512),[[h,t.articleForm.author]])]),s("div",Kt,[e[49]||(e[49]=s("label",{for:"articleContent"},"文章内容",-1)),m(s("textarea",{id:"articleContent","onUpdate:modelValue":e[14]||(e[14]=r=>t.articleForm.content=r),placeholder:"请输入文章内容",rows:"10"},null,512),[[h,t.articleForm.content]])]),s("button",{class:"submit-btn",onClick:e[15]||(e[15]=(...r)=>o.submitArticle&&o.submitArticle(...r))},"提交文章")]),s("div",Yt,[e[52]||(e[52]=s("h3",null,"已上传文章",-1)),s("div",Wt,[m(s("input",{type:"text","onUpdate:modelValue":e[16]||(e[16]=r=>t.searchTerm=r),placeholder:"搜索文章..."},null,512),[[h,t.searchTerm]])]),s("table",Gt,[e[51]||(e[51]=s("thead",null,[s("tr",null,[s("th",null,"标题"),s("th",null,"分类"),s("th",null,"上传时间"),s("th",null,"操作")])],-1)),s("tbody",null,[(n(!0),l(y,null,w(o.filteredArticles,r=>(n(),l("tr",{key:r.id},[s("td",Qt,d(r.title),1),s("td",null,d(r.category),1),s("td",null,d(r.uploadTime),1),s("td",null,[s("button",{class:"edit-btn",onClick:a=>o.editArticle(r)},"编辑",8,Xt),s("button",{class:p(["delete-btn",{"delete-btn-active":t.hoveredArticleId===r.id}]),onClick:a=>o.deleteArticle(r.id),onMouseenter:a=>t.hoveredArticleId=r.id,onMouseleave:e[17]||(e[17]=a=>t.hoveredArticleId=null)},"删除",42,Zt)])]))),128))])])])])):g("",!0),t.activeTab==="adminSettings"?(n(),l("div",$t,[e[59]||(e[59]=s("div",{class:"section-header"},[s("h2",null,"账户设置"),s("p",null,"修改您的账户密码")],-1)),s("div",er,[s("div",sr,[e[58]||(e[58]=s("h3",null,"修改密码",-1)),s("div",tr,[e[55]||(e[55]=s("label",{for:"currentPassword"},"当前密码",-1)),m(s("input",{type:"password",id:"currentPassword","onUpdate:modelValue":e[18]||(e[18]=r=>t.passwordForm.currentPassword=r)},null,512),[[h,t.passwordForm.currentPassword]])]),s("div",rr,[e[56]||(e[56]=s("label",{for:"newPassword"},"新密码",-1)),m(s("input",{type:"password",id:"newPassword","onUpdate:modelValue":e[19]||(e[19]=r=>t.passwordForm.newPassword=r)},null,512),[[h,t.passwordForm.newPassword]])]),s("div",or,[e[57]||(e[57]=s("label",{for:"confirmPassword"},"确认新密码",-1)),m(s("input",{type:"password",id:"confirmPassword","onUpdate:modelValue":e[20]||(e[20]=r=>t.passwordForm.confirmPassword=r)},null,512),[[h,t.passwordForm.confirmPassword]])]),s("button",{class:"submit-btn",onClick:e[21]||(e[21]=(...r)=>o.handlePasswordUpdate&&o.handlePasswordUpdate(...r))},"更新密码"),t.passwordMessage?(n(),l("div",{key:0,class:p(["password-message",t.passwordMessageType])},d(t.passwordMessage),3)):g("",!0)])])])):g("",!0),t.activeTab==="userManagement"&&t.isSuperAdmin?(n(),l("div",ir,[e[67]||(e[67]=s("div",{class:"section-header"},[s("h2",null,"用户管理"),s("p",null,"添加和删除用户账户")],-1)),s("div",nr,[s("div",lr,[e[64]||(e[64]=s("h3",null,"添加新用户",-1)),s("div",ar,[e[60]||(e[60]=s("label",{for:"username"},"用户名",-1)),m(s("input",{type:"text",id:"username","onUpdate:modelValue":e[22]||(e[22]=r=>t.newUserForm.username=r),placeholder:"请输入用户名"},null,512),[[h,t.newUserForm.username]])]),s("div",dr,[e[61]||(e[61]=s("label",{for:"password"},"密码",-1)),m(s("input",{type:"password",id:"password","onUpdate:modelValue":e[23]||(e[23]=r=>t.newUserForm.password=r),placeholder:"请输入密码"},null,512),[[h,t.newUserForm.password]])]),s("div",ur,[e[63]||(e[63]=s("label",{for:"role"},"角色",-1)),m(s("select",{id:"role","onUpdate:modelValue":e[24]||(e[24]=r=>t.newUserForm.role=r)},[...e[62]||(e[62]=[s("option",{value:"admin"},"管理员",-1),s("option",{value:"super_admin"},"超级管理员",-1)])],512),[[A,t.newUserForm.role]])]),s("button",{class:"submit-btn",onClick:e[25]||(e[25]=(...r)=>o.handleAddUser&&o.handleAddUser(...r))},"添加用户"),t.userError?(n(),l("div",cr,d(t.userError),1)):g("",!0),t.userMessage?(n(),l("div",mr,d(t.userMessage),1)):g("",!0)]),s("div",gr,[e[66]||(e[66]=s("h3",null,"用户列表",-1)),s("table",pr,[e[65]||(e[65]=s("thead",null,[s("tr",null,[s("th",null,"用户名"),s("th",null,"角色"),s("th",null,"操作")])],-1)),s("tbody",null,[(n(!0),l(y,null,w(t.users,r=>(n(),l("tr",{key:r.username},[s("td",null,d(r.username),1),s("td",null,[r.role==="super_admin"?(n(),l("span",hr,"超级管理员")):r.role==="admin"?(n(),l("span",fr,"管理员")):(n(),l("span",vr,"普通用户"))]),s("td",null,[r.username!=="superadmin"?(n(),l("button",{key:0,class:"delete-btn",onClick:a=>o.handleDeleteUser(r.username)}," 删除 ",8,br)):(n(),l("span",yr,"不可删除"))])]))),128))])])])])])):g("",!0)])])])}const xr=f(Ws,[["render",wr],["__scopeId","data-v-6f90fe64"]]),Sr={name:"App",components:{Header:ue,Hero:pe,About:Ue,BlogIntro:Ne,Articles:ns,ArticleForm:bs,Contact:Us,Footer:Os,BackToTop:Ds,AdminLogin:Ys,AdminPanel:xr},data(){return{showAdminLogin:!1,showAdminPanel:!1,showArticleForm:!1,adminLoginSource:{},navigationSettings:[{id:"hero",name:"首页横幅",visible:!0},{id:"about",name:"关于开发者",visible:!0},{id:"blogIntro",name:"博格介绍",visible:!0},{id:"articles",name:"文章列表",visible:!0},{id:"contact",name:"联系开发者",visible:!0}]}},mounted(){this.checkLoginStatus(),this.loadNavigationSettings(),window.addEventListener("popstate",this.checkLoginStatus)},beforeUnmount(){window.removeEventListener("popstate",this.checkLoginStatus)},methods:{handleShowAdminLogin(i={}){this.showAdminLogin=!0,this.adminLoginSource=i},showArticleFormDialog(){this.showArticleForm=!0},closeArticleForm(){this.showArticleForm=!1},checkLoginStatus(){const i=localStorage.getItem("adminLoggedIn")==="true";if(localStorage.getItem("userLoggedIn")==="true"&&!i){this.showAdminPanel=!1,this.showAdminLogin=!1;return}i?(this.showAdminPanel=!0,this.showAdminLogin=!1):this.showAdminLogin||(this.showAdminPanel=!1)},loadNavigationSettings(){try{const i=localStorage.getItem("navigationSettings");i&&(this.navigationSettings=JSON.parse(i))}catch(i){console.error("加载导航设置失败:",i)}},isNavVisible(i){const e=this.navigationSettings.find(u=>u.id===i);return e?e.visible:!0},handleLoginSuccess(){this.showAdminLogin=!1,this.showAdminPanel=!0,window.location.href="/"},handleLogout(){localStorage.removeItem("adminLoggedIn"),this.showAdminPanel=!1,this.showAdminLogin=!1},handleNavigationUpdated(i){this.navigationSettings=i},handleArticlePublished(){this.$refs.articlesRef&&(this.$refs.articlesRef.currentPage=1,this.$refs.articlesRef.fetchArticles())}}},Ar={class:"min-h-screen"},_r={key:0},kr={key:1},Lr={key:2};function Ur(i,e,u,c,t,o){const r=b("AdminPanel"),a=b("AdminLogin"),v=b("Header"),C=b("Hero"),F=b("About"),T=b("BlogIntro"),P=b("Articles"),O=b("Contact"),N=b("ArticleForm"),V=b("Footer"),D=b("BackToTop");return n(),l("div",Ar,[t.showAdminPanel?(n(),l("div",_r,[x(r,{onLogout:o.handleLogout,onNavigationUpdated:o.handleNavigationUpdated,onArticleCreated:o.handleArticlePublished},null,8,["onLogout","onNavigationUpdated","onArticleCreated"])])):t.showAdminLogin?(n(),l("div",kr,[x(a,{onLoginSuccess:o.handleLoginSuccess,"show-permission-alert":!0},null,8,["onLoginSuccess"])])):(n(),l("div",Lr,[x(v,{onShowAdminLogin:o.handleShowAdminLogin,onShowArticleForm:o.showArticleFormDialog},null,8,["onShowAdminLogin","onShowArticleForm"]),s("main",null,[o.isNavVisible("hero")?(n(),S(C,{key:0})):g("",!0),o.isNavVisible("about")?(n(),S(F,{key:1})):g("",!0),o.isNavVisible("blogIntro")?(n(),S(T,{key:2})):g("",!0),o.isNavVisible("articles")?(n(),S(P,{key:3,ref:"articlesRef"},null,512)):g("",!0),o.isNavVisible("contact")?(n(),S(O,{key:4})):g("",!0)]),t.showArticleForm?(n(),l("div",{key:0,class:"article-form-modal-overlay",onClick:e[2]||(e[2]=(..._)=>o.closeArticleForm&&o.closeArticleForm(..._))},[s("div",{class:"article-form-modal",onClick:e[1]||(e[1]=U(()=>{},["stop"]))},[s("button",{class:"article-form-close",onClick:e[0]||(e[0]=(..._)=>o.closeArticleForm&&o.closeArticleForm(..._))},[...e[3]||(e[3]=[s("i",{class:"fa fa-times","aria-hidden":"true"},null,-1)])]),x(N,{onArticlePublished:o.handleArticlePublished},null,8,["onArticlePublished"])])])):g("",!0),x(V),x(D)]))])}const Ir=f(Sr,[["render",Ur]]),Mr=E(Ir);Mr.mount("#app");
