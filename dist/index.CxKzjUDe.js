import{c as a,a as t,b as g,t as u,w as m,v as h,d as T,o as i,e as A,f as O,g as L,n as p,F as b,r as y,h as w,i as _,j as U,k as M,l as W,m as S,p as K}from"./chunks/vue.DkfjYBcZ.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))c(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const r of n.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&c(r)}).observe(document,{childList:!0,subtree:!0});function d(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerPolicy&&(n.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?n.credentials="include":s.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function c(s){if(s.ep)return;s.ep=!0;const n=d(s);fetch(s.href,n)}})();const f=(o,e)=>{const d=o.__vccOpts||o;for(const[c,s]of e)d[c]=s;return d},Y={name:"UserAuth",props:{show:{type:Boolean,default:!1}},data(){return{isRegister:!1,formData:{username:"",password:""},error:""}},watch:{show(o){o&&this.resetForm()}},methods:{toggleMode(){this.isRegister=!this.isRegister,this.resetForm()},resetForm(){this.formData={username:"",password:""},this.error=""},handleClose(){this.$emit("close")},handleOverlayClick(){this.handleClose()},async handleSubmit(){if(!this.formData.username||!this.formData.password){this.error="请填写用户名和密码";return}if(this.formData.username.length<3){this.error="用户名长度至少为3个字符";return}if(this.formData.password.length<4){this.error="密码长度至少为4个字符";return}try{const o=localStorage.getItem("normalUsers");let e=[];if(o&&(e=JSON.parse(o)),this.isRegister){if(e.some(d=>d.username===this.formData.username)){this.error="用户名已存在";return}e.push({username:this.formData.username,password:this.formData.password}),localStorage.setItem("normalUsers",JSON.stringify(e)),localStorage.setItem("userLoggedIn","true"),localStorage.setItem("username",this.formData.username),this.$emit("login-success",this.formData.username),this.handleClose()}else{if(!e.some(s=>s.username===this.formData.username)){this.error="你的账户因违反网站安全管理条例而注销，请重新注册";return}if(!e.find(s=>s.username===this.formData.username&&s.password===this.formData.password)){this.error="用户名或密码错误";return}localStorage.setItem("userLoggedIn","true"),localStorage.setItem("username",this.formData.username),this.$emit("login-success",this.formData.username),this.handleClose()}}catch(o){this.error="操作失败，请重试",console.error(o)}}}},X={class:"auth-header"},Z={key:0,class:"error-message"},Q={class:"auth-form"},$={class:"form-group"},ee={class:"form-group"},te={class:"auth-footer"};function se(o,e,d,c,s,n){return i(),a("div",{class:"user-auth-overlay",onClick:e[6]||(e[6]=(...r)=>n.handleOverlayClick&&n.handleOverlayClick(...r))},[t("div",{class:"user-auth-container",onClick:e[5]||(e[5]=T(()=>{},["stop"]))},[t("div",X,[t("h2",null,u(s.isRegister?"用户注册":"用户登录"),1),t("button",{class:"close-btn",onClick:e[0]||(e[0]=(...r)=>n.handleClose&&n.handleClose(...r))},"×")]),s.error?(i(),a("div",Z,u(s.error),1)):g("",!0),t("div",Q,[t("div",$,[e[7]||(e[7]=t("label",{for:"username"},"用户名",-1)),m(t("input",{type:"text",id:"username","onUpdate:modelValue":e[1]||(e[1]=r=>s.formData.username=r),placeholder:"请输入用户名"},null,512),[[h,s.formData.username]])]),t("div",ee,[e[8]||(e[8]=t("label",{for:"password"},"密码",-1)),m(t("input",{type:"password",id:"password","onUpdate:modelValue":e[2]||(e[2]=r=>s.formData.password=r),placeholder:"请输入密码"},null,512),[[h,s.formData.password]])]),t("button",{class:"auth-button",onClick:e[3]||(e[3]=(...r)=>n.handleSubmit&&n.handleSubmit(...r))},u(s.isRegister?"注册":"登录"),1),t("div",te,[t("span",{onClick:e[4]||(e[4]=(...r)=>n.toggleMode&&n.toggleMode(...r)),class:"switch-mode"},u(s.isRegister?"已有账号？立即登录":"还没有账号？立即注册"),1)])])])])}const re=f(Y,[["render",se],["__scopeId","data-v-1373a9e2"]]),oe={name:"Header",components:{UserAuth:re},data(){return{menuOpen:!1,longPressTimer:null,showUserAuth:!1,isUserLoggedIn:localStorage.getItem("userLoggedIn")==="true",username:localStorage.getItem("username")||"",userMenuOpen:!1}},methods:{toggleMenu(){this.menuOpen=!this.menuOpen},closeMenu(){this.menuOpen=!1},startLongPress(){this.longPressTimer=setTimeout(()=>{this.$emit("show-admin-login",{fromLogoPress:!0})},1500)},toggleUserMenu(){this.userMenuOpen=!this.userMenuOpen},handlePublishArticleClick(){this.handlePublishArticle()},handlePublishArticle(){localStorage.getItem("userLoggedIn")==="true"?this.$emit("show-article-form"):alert("请先登录后再发布文章"),this.userMenuOpen=!1},handleUserSettings(){alert("用户设置功能待实现"),this.userMenuOpen=!1},handleUserLogout(){localStorage.removeItem("userLoggedIn"),localStorage.removeItem("username"),this.isUserLoggedIn=!1,this.username="",this.userMenuOpen=!1,window.location.reload()},handleAuthSuccess(o){this.isUserLoggedIn=!0,this.username=o,this.showUserAuth=!1},handleAuthClose(){this.showUserAuth=!1},cancelLongPress(){this.longPressTimer&&(clearTimeout(this.longPressTimer),this.longPressTimer=null)}},mounted(){this.handleClickOutside=o=>{if(this.$el)try{const e=this.$el.querySelector(".user-menu-wrapper");e&&!e.contains(o.target)&&this.userMenuOpen&&(this.userMenuOpen=!1)}catch(e){console.warn("Error in handleClickOutside:",e)}},document.addEventListener("click",this.handleClickOutside)},beforeUnmount(){this.cancelLongPress(),this.userMenuOpen=!1,document.removeEventListener("click",this.handleClickOutside)}},ne={class:"sticky top-0 z-50 bg-white/90 backdrop-blur-sm shadow-sm transition-custom"},ie={class:"container mx-auto px-4 py-4 flex justify-between items-center"},ae={class:"flex items-center gap-4"},le={class:"hidden md:block relative"},de={key:1,class:"user-menu-wrapper"},ue={class:"user-dropdown-menu"},ce={class:"md:hidden bg-white border-t"},me={class:"container mx-auto px-4 py-2 flex flex-col space-y-3"},ge={class:"py-2 border-t"},pe={key:1,class:"flex justify-between items-center user-menu-wrapper"},he={class:"flex items-center"},fe={class:"ml-2"},ve={class:"ml-6 mt-2 flex flex-col space-y-2"};function ye(o,e,d,c,s,n){const r=y("UserAuth");return i(),a(b,null,[t("header",ne,[t("div",ie,[t("a",{href:"#",class:"text-2xl font-bold text-primary flex items-center gap-2",onMousedown:e[0]||(e[0]=(...l)=>n.startLongPress&&n.startLongPress(...l)),onTouchstart:e[1]||(e[1]=(...l)=>n.startLongPress&&n.startLongPress(...l)),onMouseup:e[2]||(e[2]=(...l)=>n.cancelLongPress&&n.cancelLongPress(...l)),onTouchend:e[3]||(e[3]=(...l)=>n.cancelLongPress&&n.cancelLongPress(...l)),onMouseleave:e[4]||(e[4]=(...l)=>n.cancelLongPress&&n.cancelLongPress(...l)),onTouchcancel:e[5]||(e[5]=(...l)=>n.cancelLongPress&&n.cancelLongPress(...l)),onClick:e[6]||(e[6]=(...l)=>n.handlePublishArticleClick&&n.handlePublishArticleClick(...l))},[...e[22]||(e[22]=[t("i",{class:"fa fa-pencil-square-o","aria-hidden":"true"},null,-1),t("span",null,"Boge",-1)])],32),t("div",ae,[e[29]||(e[29]=O('<nav class="hidden md:flex items-center space-x-8" data-v-5aaef954><a href="#about" class="text-gray-600 hover:text-primary transition-custom" data-v-5aaef954>关于开发者</a><a href="#blog" class="text-gray-600 hover:text-primary transition-custom" data-v-5aaef954>博格简介</a><a href="#articles" class="text-gray-600 hover:text-primary transition-custom" data-v-5aaef954>文章</a><a href="#contact" class="text-gray-600 hover:text-primary transition-custom" data-v-5aaef954>联系开发者</a></nav>',1)),t("div",le,[s.isUserLoggedIn?(i(),a("div",de,[t("button",{onClick:e[8]||(e[8]=(...l)=>n.toggleUserMenu&&n.toggleUserMenu(...l)),class:"user-menu-trigger"},[e[24]||(e[24]=t("i",{class:"fa fa-user-circle-o","aria-hidden":"true"},null,-1)),t("span",null,u(s.username),1),e[25]||(e[25]=t("i",{class:"fa fa-angle-down","aria-hidden":"true"},null,-1))]),m(t("div",ue,[t("button",{onClick:e[9]||(e[9]=(...l)=>n.handlePublishArticle&&n.handlePublishArticle(...l)),class:"dropdown-item"},[...e[26]||(e[26]=[t("i",{class:"fa fa-pencil","aria-hidden":"true"},null,-1),t("span",null,"发布文章",-1)])]),t("button",{onClick:e[10]||(e[10]=(...l)=>n.handleUserSettings&&n.handleUserSettings(...l)),class:"dropdown-item"},[...e[27]||(e[27]=[t("i",{class:"fa fa-cog","aria-hidden":"true"},null,-1),t("span",null,"设置",-1)])]),t("button",{onClick:e[11]||(e[11]=(...l)=>n.handleUserLogout&&n.handleUserLogout(...l)),class:"dropdown-item"},[...e[28]||(e[28]=[t("i",{class:"fa fa-sign-out","aria-hidden":"true"},null,-1),t("span",null,"退出登录",-1)])])],512),[[L,s.userMenuOpen]])])):(i(),a("button",{key:0,onClick:e[7]||(e[7]=l=>s.showUserAuth=!0),class:"login-btn"},[...e[23]||(e[23]=[t("i",{class:"fa fa-user-circle-o","aria-hidden":"true"},null,-1),t("span",null,"登录",-1)])]))])]),t("button",{onClick:e[12]||(e[12]=(...l)=>n.toggleMenu&&n.toggleMenu(...l)),class:"md:hidden text-gray-600 hover:text-primary transition-custom"},[t("i",{class:p(["fa",s.menuOpen?"fa-times":"fa-bars","text-xl"]),"aria-hidden":"true"},null,2)])]),m(t("div",ce,[t("div",me,[t("a",{href:"#about",class:"py-2 text-gray-600 hover:text-primary transition-custom",onClick:e[13]||(e[13]=(...l)=>n.closeMenu&&n.closeMenu(...l))},"关于开发者"),t("a",{href:"#blog",class:"py-2 text-gray-600 hover:text-primary transition-custom",onClick:e[14]||(e[14]=(...l)=>n.closeMenu&&n.closeMenu(...l))},"博格简介"),t("a",{href:"#articles",class:"py-2 text-gray-600 hover:text-primary transition-custom",onClick:e[15]||(e[15]=(...l)=>n.closeMenu&&n.closeMenu(...l))},"文章"),t("a",{href:"#contact",class:"py-2 text-gray-600 hover:text-primary transition-custom",onClick:e[16]||(e[16]=(...l)=>n.closeMenu&&n.closeMenu(...l))},"联系开发者"),t("div",ge,[s.isUserLoggedIn?(i(),a("div",pe,[t("div",he,[e[31]||(e[31]=t("i",{class:"fa fa-user-circle-o","aria-hidden":"true"},null,-1)),t("span",fe,u(s.username),1)]),t("button",{onClick:e[18]||(e[18]=(...l)=>n.toggleUserMenu&&n.toggleUserMenu(...l)),class:"text-gray-600"},[...e[32]||(e[32]=[t("i",{class:"fa fa-angle-down","aria-hidden":"true"},null,-1)])])])):(i(),a("button",{key:0,onClick:e[17]||(e[17]=l=>{s.showUserAuth=!0,n.closeMenu()}),class:"w-full text-left py-2 text-gray-600 hover:text-primary transition-custom"},[...e[30]||(e[30]=[t("i",{class:"fa fa-user-circle-o","aria-hidden":"true"},null,-1),t("span",{class:"ml-2"},"登录",-1)])])),m(t("div",ve,[t("button",{onClick:e[19]||(e[19]=l=>{n.handlePublishArticle,n.closeMenu()}),class:"text-left py-1 text-gray-600 hover:text-primary transition-custom"},[...e[33]||(e[33]=[t("i",{class:"fa fa-pencil","aria-hidden":"true"},null,-1),t("span",{class:"ml-2"},"发布文章",-1)])]),t("button",{onClick:e[20]||(e[20]=l=>{n.handleUserSettings,n.closeMenu()}),class:"text-left py-1 text-gray-600 hover:text-primary transition-custom"},[...e[34]||(e[34]=[t("i",{class:"fa fa-cog","aria-hidden":"true"},null,-1),t("span",{class:"ml-2"},"设置",-1)])]),t("button",{onClick:e[21]||(e[21]=l=>{n.handleUserLogout,n.closeMenu()}),class:"text-left py-1 text-gray-600 hover:text-primary transition-custom"},[...e[35]||(e[35]=[t("i",{class:"fa fa-sign-out","aria-hidden":"true"},null,-1),t("span",{class:"ml-2"},"退出登录",-1)])])],512),[[L,s.userMenuOpen]])])])],512),[[L,s.menuOpen]])]),s.showUserAuth?(i(),A(r,{key:0,show:s.showUserAuth,onClose:n.handleAuthClose,onLoginSuccess:n.handleAuthSuccess},null,8,["show","onClose","onLoginSuccess"])):g("",!0)],64)}const be=f(oe,[["render",ye],["__scopeId","data-v-5aaef954"]]),we={name:"Hero"},xe={class:"relative bg-gradient-to-br from-blue-50 to-indigo-50 py-20 md:py-32 overflow-hidden"};function Se(o,e,d,c,s,n){return i(),a("section",xe,[...e[0]||(e[0]=[O('<div class="absolute inset-0 opacity-10" data-v-98d06034><div class="absolute top-10 left-10 w-40 h-40 rounded-full bg-primary" data-v-98d06034></div><div class="absolute bottom-10 right-10 w-60 h-60 rounded-full bg-secondary" data-v-98d06034></div></div><div class="container mx-auto px-4 relative z-10" data-v-98d06034><div class="max-w-3xl mx-auto text-center" data-v-98d06034><h1 class="text-[clamp(2.5rem,5vw,4rem)] font-bold text-dark mb-6 leading-tight text-shadow" data-v-98d06034> 探索思想，记录生活 </h1><p class="text-[clamp(1.1rem,2vw,1.3rem)] text-gray-600 mb-8" data-v-98d06034> 欢迎来到博格，这里分享思考、学习和生活点滴 </p><a href="#articles" class="inline-block bg-primary hover:bg-primary/90 text-white font-medium px-8 py-3 rounded-full shadow-lg hover:shadow-xl transition-custom transform hover:-translate-y-1" data-v-98d06034> 浏览文章 </a></div></div>',2)])])}const Ae=f(we,[["render",Se],["__scopeId","data-v-98d06034"]]),ke={name:"About",data(){return{greeting:"你好，我是开发者",avatarUrl:"https://p3-passport.byteacctimg.com/img/user-avatar/52550b01fd44b51170eaae83e3bdba5c~120x120.awebp"}}},_e={id:"about",class:"py-20 bg-white"},Ue={class:"container mx-auto px-4"},Ie={class:"max-w-6xl mx-auto"},Le={class:"flex flex-col md:flex-row items-center gap-12"},Me={class:"w-full md:w-1/3 flex justify-center"},Ce={class:"relative"},Pe={class:"w-64 h-64 rounded-full overflow-hidden border-4 border-white shadow-xl"},Fe=["src"],Te={class:"w-full md:w-2/3"},Oe={class:"text-2xl font-bold mb-4"};function Ne(o,e,d,c,s,n){return i(),a("section",_e,[t("div",Ue,[t("div",Ie,[e[3]||(e[3]=t("h2",{class:"text-[clamp(1.8rem,3vw,2.5rem)] font-bold text-center mb-16 relative"},[t("span",{class:"relative z-10"},"关于开发者"),t("span",{class:"absolute bottom-2 left-1/2 -translate-x-1/2 w-24 h-3 bg-primary/20 -z-10 rounded-full"})],-1)),t("div",Le,[t("div",Me,[t("div",Ce,[t("div",Pe,[t("img",{src:s.avatarUrl,alt:"博主头像",class:"w-full h-full object-cover"},null,8,Fe)]),e[0]||(e[0]=t("div",{class:"absolute -bottom-4 -right-4 bg-secondary text-white rounded-full w-16 h-16 flex items-center justify-center shadow-lg"},[t("i",{class:"fa fa-code text-2xl","aria-hidden":"true"})],-1))])]),t("div",Te,[t("h3",Oe,u(s.greeting),1),e[1]||(e[1]=t("p",{class:"text-gray-600 mb-4 leading-relaxed"}," 一名热爱技术与写作的软件工程师，对Web技术、用户体验和交互设计有着浓厚的兴趣。 ",-1)),e[2]||(e[2]=t("p",{class:"text-gray-600 mb-6 leading-relaxed"}," 这个博格是记录学习心得、分享技术见解和生活感悟的地方。 ",-1))])])])])])}const De=f(ke,[["render",Ne],["__scopeId","data-v-8a002b69"]]),Ve={name:"BlogIntro",data(){return{blogCategories:[{id:1,title:"技术分享",description:"前端开发技术、框架使用心得、编程技巧和解决方案",icon:"fa-laptop",bgColor:"bg-blue-100",textColor:"text-primary"},{id:2,title:"学习笔记",description:"新技术学习过程中的笔记、总结和思考",icon:"fa-book",bgColor:"bg-green-100",textColor:"text-secondary"},{id:3,title:"生活感悟",description:"旅行见闻、阅读感悟和生活中的思考与体会",icon:"fa-lightbulb-o",bgColor:"bg-purple-100",textColor:"text-purple-500"}]}}},Be={id:"blog",class:"py-20 bg-gray-50"},Re={class:"container mx-auto px-4"},Ee={class:"grid grid-cols-1 md:grid-cols-3 gap-8 max-w-6xl mx-auto"},je={class:"text-xl font-bold mb-3"},Je={class:"text-gray-600"};function ze(o,e,d,c,s,n){return i(),a("section",Be,[t("div",Re,[e[0]||(e[0]=t("div",{class:"max-w-3xl mx-auto text-center"},[t("h2",{class:"text-[clamp(1.8rem,3vw,2.5rem)] font-bold mb-6"},"博格简介"),t("p",{class:"text-gray-600 mb-12 leading-relaxed"}," 这个博格创建于2025年，主要分享以下内容： ")],-1)),t("div",Ee,[(i(!0),a(b,null,w(s.blogCategories,r=>(i(),a("div",{key:r.id,class:"bg-white p-8 rounded-xl shadow-md hover:shadow-lg transition-custom transform hover:-translate-y-1"},[t("div",{class:p(["w-14 h-14",r.bgColor,"rounded-full flex items-center justify-center mb-6"])},[t("i",{class:p(["fa",r.icon,r.textColor,"text-2xl"]),"aria-hidden":"true"},null,2)],2),t("h3",je,u(r.title),1),t("p",Je,u(r.description),1)]))),128))])])])}const qe=f(Ve,[["render",ze],["__scopeId","data-v-4bf4efc4"]]),He={name:"Articles",data(){return{articles:[],displayedArticles:[],isLoading:!1,showModal:!1,selectedArticle:null,currentPage:1,pageSize:6,featuredSettings:{displayCount:3,featuredArticles:[]}}},mounted(){setTimeout(()=>{this.fetchArticles(),this.loadFeaturedSettings()},100),window.addEventListener("storage",this.handleStorageChange)},beforeUnmount(){window.removeEventListener("storage",this.handleStorageChange)},watch:{articles(){this.applyFeaturedSettings()},featuredSettings(){this.applyFeaturedSettings()}},methods:{loadFeaturedSettings(){try{const o=localStorage.getItem("featuredArticlesSettings");o&&(this.featuredSettings=JSON.parse(o))}catch(o){console.error("加载最新文章设置失败:",o)}},applyFeaturedSettings(){let o=[...this.articles].filter(c=>c.approvalStatus==="approved"||!c.approvalStatus);const e=[],d=[];o.forEach(c=>{this.featuredSettings.featuredArticles.includes(c.id)?e.push(c):d.push(c)}),e.sort((c,s)=>{const n=this.featuredSettings.featuredArticles.indexOf(c.id),r=this.featuredSettings.featuredArticles.indexOf(s.id);return n-r}),this.displayedArticles=[...e,...d].slice(0,this.featuredSettings.displayCount)},async fetchArticles(){const o=`articles_cache_page_${this.currentPage}`,e=localStorage.getItem(o),d=localStorage.getItem(`${o}_timestamp`),c=5*60*1e3;if(e&&d&&Date.now()-d<c&&this.currentPage===1){const s=JSON.parse(e);this.articles=s,this.applyFeaturedSettings();return}this.isLoading=!0;try{if(this.currentPage===1){this.articles=this.getMockArticles(),this.applyFeaturedSettings(),this.isLoading=!1;return}if(!window.location.hostname.includes("github.io")){const n=await fetch(`/api/articles?page=${this.currentPage}&pageSize=${this.pageSize}`);if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);const x=((await n.json()).articles||[]).map(v=>({id:v._id,title:v.title,summary:v.summary,content:v.content,category:v.category,date:new Date(v.createdAt).toLocaleDateString("zh-CN"),approvalStatus:v.approvalStatus||"approved"})).filter(v=>v.approvalStatus==="approved"||!v.approvalStatus);this.currentPage===1?(this.articles=x,localStorage.setItem(o,JSON.stringify(x)),localStorage.setItem(`${o}_timestamp`,Date.now().toString())):this.articles.push(...x),this.applyFeaturedSettings()}else this.currentPage>1&&(this.articles.push(...this.getMoreMockArticles()),this.applyFeaturedSettings())}catch(s){console.error("获取文章失败:",s),this.currentPage===1?this.articles=this.getMockArticles():this.articles.push(...this.getMoreMockArticles()),this.applyFeaturedSettings()}finally{this.isLoading=!1}},getMockArticles(){return[{id:"1",title:"欢迎来到伯格博客",summary:"这是伯格博客的第一篇文章，介绍了博客的主要功能和使用方法。",content:`欢迎来到伯格博客！

伯格博客是一个简单但功能强大的博客系统，支持文章发布、分类管理、用户评论等功能。

主要特点：
- 简洁美观的界面设计
- 响应式布局，支持各种设备
- 支持文章分类和标签
- 内置评论系统
- 支持搜索功能

感谢您的访问！`,category:"公告",date:"2024-01-01",approvalStatus:"approved"},{id:"2",title:"如何有效提高编程效率",summary:"本文分享了一些提高编程效率的实用技巧和工具推荐。",content:`在日常开发中，效率是关键。以下是一些可以帮助你提高编程效率的方法：

1. 使用键盘快捷键
2. 善用代码片段和模板
3. 学习并使用适当的开发工具
4. 保持代码整洁，遵循最佳实践
5. 定期休息，避免疲劳编程

记住，效率不仅仅是速度，还包括代码质量和可维护性。`,category:"编程技巧",date:"2024-01-15",approvalStatus:"approved"},{id:"3",title:"Vue.js 3.0 新特性介绍",summary:"深入探讨Vue.js 3.0带来的重大更新和性能改进。",content:`Vue.js 3.0引入了许多令人兴奋的新特性：

- Composition API：提供更灵活的代码组织方式
- 更好的TypeScript支持
- 更小的包体积
- 更快的渲染性能
- Fragment、Teleport和Suspense等新组件

这些改进使Vue.js在保持易用性的同时，也大大提升了在复杂应用场景中的表现。`,category:"前端技术",date:"2024-01-30",approvalStatus:"approved"},{id:"4",title:"现代前端开发工作流",summary:"详细介绍现代前端开发的标准工作流程和工具链。",content:`现代前端开发已经变得非常复杂，拥有一套完整的工作流程至关重要：

1. 项目初始化与脚手架工具
2. 依赖管理
3. 开发服务器与热重载
4. 代码检查与格式化
5. 构建与优化
6. 测试策略
7. 部署自动化

合理配置这些环节，可以显著提高团队协作效率和代码质量。`,category:"开发实践",date:"2024-02-15",approvalStatus:"approved"},{id:"5",title:"响应式设计最佳实践",summary:"分享响应式网页设计的核心原则和实现技巧。",content:`响应式设计是现代Web开发的基础，以下是一些最佳实践：

- 移动优先设计
- 使用弹性布局(Flexbox)和网格布局(Grid)
- 媒体查询的合理使用
- 响应式图片处理
- 触摸友好的界面元素

通过这些技术，可以创建出在各种设备上都能提供良好用户体验的网站。`,category:"UI/UX",date:"2024-02-28",approvalStatus:"approved"},{id:"6",title:"前端性能优化指南",summary:"全面介绍前端性能优化的方法和工具。",content:`性能优化是前端开发中永恒的话题：

1. 资源压缩与合并
2. 懒加载与预加载
3. 缓存策略
4. 代码分割
5. 减少重排与重绘
6. 使用Web Workers处理复杂计算

良好的性能不仅提升用户体验，还能影响搜索引擎排名和转化率。`,category:"性能优化",date:"2024-03-15",approvalStatus:"approved"}]},getMoreMockArticles(){const o=new Date("2024-03-16");return[{id:"7",title:"JavaScript异步编程深入理解",summary:"深入剖析JavaScript中的Promise、async/await等异步编程模式。",content:`JavaScript的异步编程经历了从回调函数到Promise，再到async/await的演进：

1. 回调地狱问题及解决方案
2. Promise的原理与使用
3. async/await语法糖
4. 错误处理策略
5. 并发控制技巧

掌握这些异步编程模式，可以编写出更清晰、更易维护的代码。`,category:"JavaScript",date:new Date(o.getTime()+7*24*60*60*1e3).toLocaleDateString("zh-CN"),approvalStatus:"approved"},{id:"8",title:"CSS Grid布局完全指南",summary:"从基础到高级，全面介绍CSS Grid布局系统。",content:`CSS Grid是一个强大的二维布局系统：

- Grid容器与网格项
- 网格线与网格轨道
- 网格区域
- 自动布局与命名网格
- 响应式网格设计
- 网格与Flexbox的结合使用

Grid布局彻底改变了我们设计网页布局的方式，使复杂布局变得简单直观。`,category:"CSS",date:new Date(o.getTime()+14*24*60*60*1e3).toLocaleDateString("zh-CN"),approvalStatus:"approved"}]},loadMoreArticles(){this.isLoading||(this.currentPage++,this.fetchArticles())},showArticleDetail(o){this.selectedArticle=o,this.showModal=!0,document.body.style.overflow="hidden"},closeModal(){this.showModal=!1,this.selectedArticle=null,document.body.style.overflow=""},handleStorageChange(o){document.visibilityState==="visible"&&(o.key==="featuredArticlesSettings"?(this.loadFeaturedSettings(),this.applyFeaturedSettings()):o.key==="articles"&&(this._debounceTimer&&clearTimeout(this._debounceTimer),this._debounceTimer=setTimeout(()=>{this.currentPage=1,localStorage.removeItem("articles_cache_page_1"),localStorage.removeItem("articles_cache_page_1_timestamp"),this.fetchArticles()},300)))}}},Ge={id:"articles",class:"py-20 bg-white"},We={class:"container mx-auto px-4"},Ke={class:"max-w-6xl mx-auto py-8"},Ye={key:0,class:"text-center py-16"},Xe={key:1,class:"text-center py-16"},Ze={key:2,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 mt-8"},Qe={class:"p-6"},$e={class:"inline-block bg-primary/10 text-primary text-xs px-3 py-1 rounded-full mb-3"},et={class:"text-xl font-bold mb-2"},tt={class:"text-gray-500 text-sm mb-4"},st={class:"text-gray-600 mb-4 line-clamp-3"},rt=["onClick"],ot={class:"text-center mt-12"},nt=["disabled"],it={key:0,class:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50"},at={class:"bg-white rounded-lg max-w-3xl w-full max-h-[90vh] overflow-auto"},lt={class:"p-6"},dt={class:"flex justify-between items-center mb-4"},ut={class:"text-2xl font-bold"},ct={class:"flex items-center text-sm text-gray-500 mb-4"},mt={class:"bg-primary/10 text-primary px-3 py-1 rounded-full mr-3"},gt={class:"text-gray-700 whitespace-pre-line"};function pt(o,e,d,c,s,n){return i(),a("section",Ge,[t("div",We,[e[4]||(e[4]=t("h2",{class:"text-[clamp(1.8rem,3vw,2.5rem)] font-bold text-center mb-16 relative"},[t("span",{class:"relative z-10"},"最新文章"),t("span",{class:"absolute bottom-2 left-1/2 -translate-x-1/2 w-24 h-3 bg-primary/20 -z-10 rounded-full"})],-1)),t("div",Ke,[s.isLoading?(i(),a("div",Ye,[...e[2]||(e[2]=[t("p",{class:"text-gray-500"},"加载中...",-1)])])):s.articles.length===0?(i(),a("div",Xe,[...e[3]||(e[3]=[t("p",{class:"text-gray-500"},"暂无文章",-1)])])):(i(),a("div",Ze,[(i(!0),a(b,null,w(s.displayedArticles,r=>(i(),a("div",{key:r.id,class:p(["bg-gray-50 rounded-lg overflow-hidden shadow hover:shadow-md transition-shadow",{"featured-article":s.featuredSettings.featuredArticles.includes(r.id)}])},[t("div",Qe,[t("span",$e,u(r.category),1),t("h3",et,u(r.title),1),t("p",tt,u(r.date),1),t("p",st,u(r.summary),1),t("button",{onClick:l=>n.showArticleDetail(r),class:"text-primary hover:underline font-medium"},"阅读更多",8,rt)])],2))),128))]))]),t("div",ot,[t("button",{onClick:e[0]||(e[0]=(...r)=>n.loadMoreArticles&&n.loadMoreArticles(...r)),class:"inline-block border-2 border-primary text-primary hover:bg-primary hover:text-white font-medium px-8 py-3 rounded-full transition-custom",disabled:s.isLoading},u(s.isLoading?"加载中...":"查看更多"),9,nt)])]),s.showModal?(i(),a("div",it,[t("div",at,[t("div",lt,[t("div",dt,[t("h3",ut,u(s.selectedArticle.title),1),t("button",{onClick:e[1]||(e[1]=(...r)=>n.closeModal&&n.closeModal(...r)),class:"text-gray-500 hover:text-gray-700"},[...e[5]||(e[5]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),t("div",ct,[t("span",mt,u(s.selectedArticle.category),1),t("span",null,u(s.selectedArticle.date),1)]),t("div",gt,u(s.selectedArticle.content||s.selectedArticle.summary),1)])])])):g("",!0)])}const ht=f(He,[["render",pt],["__scopeId","data-v-12ccb16e"]]);let k=null,C=0;const P=5*60*1e3,D="http://localhost:3000";async function R(){console.log("开始获取cpolar公网地址...");try{try{console.log("尝试访问cpolar Web界面: http://localhost:4040/");const o=await fetch("http://localhost:4040/");if(!o.ok)console.warn(`无法访问cpolar界面: ${o.status}`);else{console.log("成功访问cpolar界面，正在解析HTML...");const e=await o.text(),d=/https?:\/\/[a-zA-Z0-9-]+\.cpolar\.(io|cn)/g,c=e.match(d);if(c&&c.length>0){const s=[...new Set(c)];return console.log("成功获取到cpolar公网地址:",s[0]),s[0]}else console.warn("未在cpolar界面找到公网地址")}}catch(o){console.error("访问cpolar界面失败:",o.message)}return console.log("使用手动配置的cpolar地址:",D),D}catch(o){return console.error("获取cpolar公网地址过程中出现严重错误:",o),console.log("使用本地地址作为最后的备选:","http://localhost:3000"),"http://localhost:3000"}}async function N(){const o=Date.now();return(!k||o-C>P)&&(k=await R(),C=o),k}async function F(){return k=await R(),C=Date.now(),k}async function ft(){return console.log("调用getBaseUrl函数获取当前API基础URL"),await N()}async function V(o){const e=await N(),d=o.startsWith("/")?o:`/${o}`;return`${e}${d}`}async function vt(){return console.log("手动刷新API基础URL..."),await N()}async function B(o,e={}){console.log(`准备发送API请求到端点: ${o}`);const d=await V(o);console.log(`构建的完整API URL: ${d}`);const c={headers:{"Content-Type":"application/json",...e.headers},credentials:"include",...e};console.log("请求方法:",c.method||"GET"),console.log("是否包含请求体:",!!c.body);try{console.log("开始发送API请求...");const s=await fetch(d,c);if(console.log(`收到API响应，状态码: ${s.status}`),!s.ok){const r=await s.text().catch(()=>"无法获取错误详情");throw console.error(`API请求失败详情: ${r}`),new Error(`API请求失败: ${s.status} ${s.statusText}`)}const n=await s.json();return console.log("API请求成功，收到响应数据"),n}catch(s){console.error(`API请求错误 (${o}):`,s.message);try{console.log("尝试刷新API URL并重试..."),await F();const n=await V(o);console.log(`使用新URL重试: ${n}`);const r=await fetch(n,c);if(!r.ok){const x=await r.text().catch(()=>"无法获取错误详情");throw console.error(`重试失败详情: ${x}`),new Error(`重试失败: ${r.status} ${r.statusText}`)}const l=await r.json();return console.log("重试成功，收到响应数据"),l}catch(n){throw console.error("重试请求也失败:",n.message),n}}}function yt(){console.log(`设置定期API URL更新，间隔: ${P/1e3}秒`),console.log("立即执行首次API URL更新..."),F();const o=setInterval(async()=>{console.log("执行定期API URL更新..."),await F()},P);console.log("API URL定期更新已启动，定时器ID:",o)}const bt={name:"ArticleForm",data(){return{article:{title:"",category:"",summary:"",content:""},isSubmitting:!1,statusMessage:"",isSuccess:!1,showDebugInfo:!1,currentApiBaseUrl:"",connectionStatus:"未检查"}},created(){yt(),this.getCurrentApiBaseUrl()},methods:{async getCurrentApiBaseUrl(){try{console.log("获取当前API基础URL...");const o=await ft();this.currentApiBaseUrl=o,console.log("当前API基础URL:",o)}catch(o){console.error("获取API基础URL失败:",o),this.currentApiBaseUrl="获取失败"}},async checkConnection(){try{console.log("检查后端连接状态..."),this.connectionStatus="检查中...";const o=await B("/health");return this.connectionStatus=o.status==="ok"?"已连接":"连接异常",console.log("连接状态:",this.connectionStatus),o}catch(o){throw console.error("连接检查失败:",o),this.connectionStatus="未连接",o}},async submitArticle(){if(!this.article.title.trim()||!this.article.content.trim()){this.statusMessage="请填写文章标题和内容",this.isSuccess=!1;return}this.isSubmitting=!0,this.statusMessage="正在发布文章...";try{const o={...this.article,author:this.article.author||"",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};console.log("文章数据准备:",o),await this.checkConnection(),console.log("发送文章发布请求...");const e=await B("/api/articles",{method:"POST",body:JSON.stringify(o)});console.log("文章发布成功:",e),this.isSuccess=!0,this.statusMessage="文章发布成功！",this.article={title:"",category:"",summary:"",content:""},this.$emit("articlePublished"),setTimeout(()=>{this.statusMessage=""},3e3)}catch(o){console.error("发布文章失败:",o),o.message.includes("Failed to fetch")?this.statusMessage="网络连接失败，请检查cpolar服务是否正常运行":o.message.includes("404")?this.statusMessage="未找到API端点，请检查URL配置":o.message.includes("403")||o.message.includes("500")?this.statusMessage="服务器错误，请稍后重试":this.statusMessage="发布失败: "+o.message,this.isSuccess=!1;try{console.log("尝试刷新API URL..."),await vt(),await this.getCurrentApiBaseUrl()}catch(e){console.error("刷新API URL失败:",e)}}finally{this.isSubmitting=!1}}}},wt={id:"article-form",class:"py-20 bg-gray-50"},xt={class:"container mx-auto px-4"},St={class:"max-w-3xl mx-auto bg-white p-8 rounded-lg shadow"},At={class:"mb-6"},kt={class:"mb-6"},_t={class:"mb-6"},Ut={class:"mb-8"},It={key:0,class:"mb-6"},Lt={class:"text-center"},Mt=["disabled"],Ct={key:0,class:"mt-8 p-4 bg-gray-100 rounded-lg"},Pt={class:"space-y-2 text-sm"};function Ft(o,e,d,c,s,n){return i(),a("section",wt,[t("div",xt,[e[16]||(e[16]=t("h2",{class:"text-[clamp(1.8rem,3vw,2.5rem)] font-bold text-center mb-16 relative"},[t("span",{class:"relative z-10"},"发布文章"),t("span",{class:"absolute bottom-2 left-1/2 -translate-x-1/2 w-24 h-3 bg-primary/20 -z-10 rounded-full"})],-1)),t("div",St,[t("form",{onSubmit:e[4]||(e[4]=T((...r)=>n.submitArticle&&n.submitArticle(...r),["prevent"]))},[t("div",At,[e[8]||(e[8]=t("label",{for:"title",class:"block text-gray-700 font-medium mb-2"},"文章标题",-1)),m(t("input",{type:"text",id:"title","onUpdate:modelValue":e[0]||(e[0]=r=>s.article.title=r),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/50",placeholder:"请输入文章标题",required:""},null,512),[[h,s.article.title]])]),t("div",kt,[e[10]||(e[10]=t("label",{for:"category",class:"block text-gray-700 font-medium mb-2"},"文章分类",-1)),m(t("select",{id:"category","onUpdate:modelValue":e[1]||(e[1]=r=>s.article.category=r),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/50",required:""},[...e[9]||(e[9]=[t("option",{value:""},"请选择分类",-1),t("option",{value:"技术"},"技术",-1),t("option",{value:"生活"},"生活",-1),t("option",{value:"经验分享"},"经验分享",-1)])],512),[[_,s.article.category]])]),t("div",_t,[e[11]||(e[11]=t("label",{for:"summary",class:"block text-gray-700 font-medium mb-2"},"文章摘要",-1)),m(t("textarea",{id:"summary","onUpdate:modelValue":e[2]||(e[2]=r=>s.article.summary=r),rows:"3",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/50",placeholder:"请输入文章摘要",required:""},null,512),[[h,s.article.summary]])]),t("div",Ut,[e[12]||(e[12]=t("label",{for:"content",class:"block text-gray-700 font-medium mb-2"},"文章内容",-1)),m(t("textarea",{id:"content","onUpdate:modelValue":e[3]||(e[3]=r=>s.article.content=r),rows:"8",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/50",placeholder:"请输入文章内容",required:""},null,512),[[h,s.article.content]])]),s.statusMessage?(i(),a("div",It,[t("div",{class:p(["w-full px-4 py-3 rounded-lg text-center",s.isSuccess?"bg-green-100 text-green-700":"bg-red-100 text-red-700"])},u(s.statusMessage),3)])):g("",!0),t("div",Lt,[t("button",{type:"submit",class:"inline-block bg-primary text-white font-medium px-8 py-3 rounded-full transition-custom hover:bg-primary/90",disabled:s.isSubmitting},u(s.isSubmitting?"提交中...":"发布文章"),9,Mt)])],32),s.showDebugInfo?(i(),a("div",Ct,[e[15]||(e[15]=t("h3",{class:"text-lg font-semibold mb-4"},"调试信息",-1)),t("div",Pt,[t("p",null,[e[13]||(e[13]=t("strong",null,"当前API基础URL:",-1)),U(" "+u(s.currentApiBaseUrl),1)]),t("p",null,[e[14]||(e[14]=t("strong",null,"连接状态:",-1)),U(" "+u(s.connectionStatus),1)]),t("button",{onClick:e[5]||(e[5]=(...r)=>n.checkConnection&&n.checkConnection(...r)),class:"mt-2 px-3 py-1 bg-blue-500 text-white rounded hover:bg-blue-600"}," 重新检查连接 "),t("button",{onClick:e[6]||(e[6]=(...r)=>n.getCurrentApiBaseUrl&&n.getCurrentApiBaseUrl(...r)),class:"mt-2 px-3 py-1 bg-purple-500 text-white rounded hover:bg-purple-600"}," 刷新API URL ")])])):g("",!0),t("button",{onClick:e[7]||(e[7]=r=>s.showDebugInfo=!s.showDebugInfo),class:"mt-4 text-sm text-gray-600 hover:text-primary"},u(s.showDebugInfo?"隐藏调试信息":"显示调试信息"),1)])])])}const Tt=f(bt,[["render",Ft],["__scopeId","data-v-3a747b1f"]]),Ot={name:"Contact",data(){return{socialLinks:[{id:1,name:"GitHub",icon:"fa-github",url:"https://github.com/Lensi-zhang"},{id:2,name:"稀土掘金",icon:"fa-book",url:"https://juejin.cn/user/1180188819589920?share_token=ceb3875a-8952-43e1-94e5-346d5043d530"},{id:3,name:"程序员客栈",icon:"fa-briefcase",url:"https://www.proginn.com/u/1138328"}]}}},Nt={id:"contact",class:"py-20 bg-gradient-to-br from-primary/5 to-secondary/5"},Dt={class:"container mx-auto px-4"},Vt={class:"max-w-3xl mx-auto text-center"},Bt={class:"flex flex-wrap justify-center gap-10"},Rt=["href"],Et={class:"font-bold text-gray-700"};function jt(o,e,d,c,s,n){return i(),a("section",Nt,[t("div",Dt,[t("div",Vt,[e[0]||(e[0]=t("h2",{class:"text-[clamp(1.8rem,3vw,2.5rem)] font-bold mb-6"},"联系开发者",-1)),e[1]||(e[1]=t("p",{class:"text-gray-600 mb-12"}," 如果你有任何问题、建议或者合作意向，欢迎通过以下方式联系开发者 ",-1)),t("div",Bt,[(i(!0),a(b,null,w(s.socialLinks,r=>(i(),a("div",{key:r.id,class:"flex flex-col items-center"},[t("a",{href:r.url,class:"w-14 h-14 bg-white rounded-full flex items-center justify-center shadow-md hover:shadow-lg transition-custom text-gray-600 hover:text-primary mb-3",target:"_blank",rel:"noopener noreferrer"},[t("i",{class:p(["fa",r.icon,"text-2xl"]),"aria-hidden":"true"},null,2)],8,Rt),t("span",Et,u(r.name),1)]))),128))])])])])}const Jt=f(Ot,[["render",jt],["__scopeId","data-v-af367384"]]),zt={name:"Footer",data(){return{currentYear:new Date().getFullYear()}}},qt={class:"bg-dark text-white py-12"},Ht={class:"container mx-auto px-4"},Gt={class:"max-w-6xl mx-auto"},Wt={class:"border-t border-gray-700 pt-8 text-center text-gray-400"};function Kt(o,e,d,c,s,n){return i(),a("footer",qt,[t("div",Ht,[t("div",Gt,[e[0]||(e[0]=O('<div class="flex flex-col md:flex-row justify-between items-center mb-8" data-v-6e6c45e7><a href="#" class="text-2xl font-bold mb-4 md:mb-0 flex items-center gap-2" data-v-6e6c45e7><i class="fa fa-pencil-square-o" aria-hidden="true" data-v-6e6c45e7></i><span data-v-6e6c45e7>Boge</span></a><div class="flex gap-6" data-v-6e6c45e7><a href="#about" class="text-gray-300 hover:text-white transition-custom" data-v-6e6c45e7>关于开发者</a><a href="#blog" class="text-gray-300 hover:text-white transition-custom" data-v-6e6c45e7>博格简介</a><a href="#articles" class="text-gray-300 hover:text-white transition-custom" data-v-6e6c45e7>文章</a><a href="#contact" class="text-gray-300 hover:text-white transition-custom" data-v-6e6c45e7>联系开发者</a></div></div>',1)),t("div",Wt,[t("p",null,"© "+u(s.currentYear)+" Boge. 保留所有权利.",1)])])])])}const Yt=f(zt,[["render",Kt],["__scopeId","data-v-6e6c45e7"]]),Xt={name:"BackToTop",data(){return{showButton:!1}},mounted(){window.addEventListener("scroll",this.handleScroll)},beforeUnmount(){window.removeEventListener("scroll",this.handleScroll)},methods:{handleScroll(){this.showButton=window.scrollY>300},scrollToTop(){window.scrollTo({top:0,behavior:"smooth"})}}};function Zt(o,e,d,c,s,n){return i(),a("button",{id:"backToTop",class:p(["fixed bottom-8 right-8 bg-primary text-white w-12 h-12 rounded-full flex items-center justify-center shadow-lg transition-custom z-50",{"opacity-0 invisible":!s.showButton,"opacity-100 visible":s.showButton}]),onClick:e[0]||(e[0]=(...r)=>n.scrollToTop&&n.scrollToTop(...r))},[...e[1]||(e[1]=[t("i",{class:"fa fa-arrow-up","aria-hidden":"true"},null,-1)])],2)}const Qt=f(Xt,[["render",Zt],["__scopeId","data-v-f55670ef"]]),$t={name:"AdminLogin",data(){return{username:"",password:"",isLoading:!1,focusedField:""}},mounted(){localStorage.getItem("adminLoggedIn")==="true"&&this.$router.push("/admin/dashboard"),localStorage.getItem("userLoggedIn")==="true"&&this.showPermissionAlert&&setTimeout(()=>{alert("你没有管理权限")},500)},props:{showPermissionAlert:{type:Boolean,default:!0}},methods:{async handleLogin(){if(!this.username||!this.password){alert("请输入用户名和密码");return}this.isLoading=!0;try{let o=!1,e="";const d=localStorage.getItem("adminUsers");let c=[];if(d)try{c=JSON.parse(d)}catch(n){console.error("解析用户列表失败:",n)}c.length===0&&(c=[{username:"superadmin",role:"super_admin"},{username:"admin",role:"admin"}]);const s=c.find(n=>n.username===this.username);if(s){const n=localStorage.getItem(`password_${s.username}`)||"admin";this.password===n&&(o=!0,e=s.role)}if(o)localStorage.setItem("adminLoggedIn","true"),localStorage.setItem("adminRole",e),localStorage.setItem("adminUsername",this.username),this.$emit("login-success");else throw new Error("用户名或密码错误")}catch(o){alert(o.message||"登录失败，请重试")}finally{this.isLoading=!1}}}},es={class:"admin-login-container"},ts={class:"form-group"},ss={class:"input-wrapper"},rs={class:"form-group"},os={class:"input-wrapper"},ns=["disabled"],is={key:0,class:"fa fa-spinner fa-spin","aria-hidden":"true"};function as(o,e,d,c,s,n){return i(),a("div",es,[t("div",{class:"login-form",onKeyup:e[9]||(e[9]=M((...r)=>o.handleEscape&&o.handleEscape(...r),["esc"])),style:{position:"relative","z-index":"1"}},[e[14]||(e[14]=t("div",{class:"login-header"},[t("div",{class:"logo"},[t("i",{class:"fa fa-pencil-square-o","aria-hidden":"true"}),t("span",null,"Boge")]),t("h2",null,"网站管理控制端")],-1)),t("div",ts,[e[11]||(e[11]=t("label",{for:"username"},"用户名",-1)),t("div",ss,[e[10]||(e[10]=t("i",{class:"fa fa-user","aria-hidden":"true"},null,-1)),m(t("input",{type:"text",id:"username","onUpdate:modelValue":e[0]||(e[0]=r=>s.username=r),placeholder:"请输入用户名",onKeyup:e[1]||(e[1]=M((...r)=>n.handleLogin&&n.handleLogin(...r),["enter"])),onFocus:e[2]||(e[2]=r=>s.focusedField="username"),onBlur:e[3]||(e[3]=r=>s.focusedField="")},null,544),[[h,s.username]])])]),t("div",rs,[e[13]||(e[13]=t("label",{for:"password"},"密码",-1)),t("div",os,[e[12]||(e[12]=t("i",{class:"fa fa-lock","aria-hidden":"true"},null,-1)),m(t("input",{type:"password",id:"password","onUpdate:modelValue":e[4]||(e[4]=r=>s.password=r),placeholder:"请输入密码",onKeyup:e[5]||(e[5]=M((...r)=>n.handleLogin&&n.handleLogin(...r),["enter"])),onFocus:e[6]||(e[6]=r=>s.focusedField="password"),onBlur:e[7]||(e[7]=r=>s.focusedField="")},null,544),[[h,s.password]])])]),t("button",{class:p(["login-button",{loading:s.isLoading}]),onClick:e[8]||(e[8]=(...r)=>n.handleLogin&&n.handleLogin(...r)),disabled:s.isLoading},[s.isLoading?(i(),a("i",is)):g("",!0),U(" "+u(s.isLoading?"登录中...":"登录"),1)],10,ns)],32)])}const ls=f($t,[["render",as],["__scopeId","data-v-4bd63580"]]),ds={name:"AdminPanel",data(){return{activeTab:"navigation",isSuperAdmin:!1,currentUsername:"",navigationItems:[{id:"about",name:"关于开发者",visible:!0},{id:"blog",name:"博格简介",visible:!0},{id:"articles",name:"文章",visible:!0},{id:"contact",name:"联系开发者",visible:!0}],isSaving:!1,saveMessage:"",saveMessageType:"success",featuredSettings:{displayCount:3,featuredArticles:[]},articleForm:{title:"",category:"tech",summary:"",content:"",approvalStatus:"pending",author:""},articles:[],searchTerm:"",passwordForm:{currentPassword:"",newPassword:"",confirmPassword:""},passwordMessage:"",passwordMessageType:"success",users:[{username:"superadmin",role:"super_admin"},{username:"admin",role:"admin"}],newUserForm:{username:"",password:"",role:"admin"},userError:"",userMessage:"",hoveredArticleId:null,approvalFilter:"pending",approvalMessage:"",approvalMessageType:""}},computed:{filteredArticles(){return this.articles.filter(o=>o.title.toLowerCase().includes(this.searchTerm.toLowerCase()))},filteredApprovalArticles(){return this.approvalFilter==="all"?this.articles:this.articles.filter(o=>o.approvalStatus===this.approvalFilter)}},mounted(){const o=localStorage.getItem("adminLoggedIn")==="true";if(localStorage.getItem("userLoggedIn")==="true"&&!o){setTimeout(()=>{alert("你没有管理权限"),window.location.href="/"},100);return}if(!o){window.location.href="/admin-login";return}this.isSuperAdmin=localStorage.getItem("adminRole")==="super_admin",this.currentUsername=localStorage.getItem("adminUsername")||"",this.loadNavigationSettings(),this.fetchArticles(),this.loadFeaturedSettings(),this.isSuperAdmin&&this.loadUsersFromStorage()},methods:{handleLogout(){localStorage.removeItem("adminLoggedIn"),localStorage.removeItem("adminRole"),localStorage.removeItem("adminUsername"),this.$emit("logout")},handlePasswordUpdate(){const o=localStorage.getItem(`password_${this.currentUsername}`)||"admin";if(this.passwordForm.currentPassword!==o){this.passwordMessage="当前密码错误",this.passwordMessageType="error";return}if(this.passwordForm.newPassword.length<4){this.passwordMessage="新密码长度至少为4个字符",this.passwordMessageType="error";return}if(this.passwordForm.newPassword!==this.passwordForm.confirmPassword){this.passwordMessage="两次输入的新密码不一致",this.passwordMessageType="error";return}localStorage.setItem(`password_${this.currentUsername}`,this.passwordForm.newPassword),this.passwordMessage="密码更新成功",this.passwordMessageType="success",this.passwordForm={currentPassword:"",newPassword:"",confirmPassword:""},setTimeout(()=>{this.passwordMessage=""},2e3)},handleAddUser(){if(this.userError="",this.userMessage="",this.users.some(e=>e.username===this.newUserForm.username)){this.userError="用户名已存在";return}if(!this.newUserForm.username||this.newUserForm.username.trim().length===0){this.userError="用户名不能为空";return}if(!this.newUserForm.password||this.newUserForm.password.length<4){this.userError="密码长度至少为4个字符";return}const o={username:this.newUserForm.username,role:this.newUserForm.role};this.users.push(o),this.saveUsersToStorage(),localStorage.setItem(`password_${o.username}`,this.newUserForm.password),this.userMessage="用户添加成功",this.newUserForm={username:"",password:"",role:"admin"}},handleDeleteUser(o){if(confirm(`确定要删除用户 ${o} 吗？`)){const e=this.users.find(s=>s.username===o),d=e?e.role:null;this.users=this.users.filter(s=>s.username!==o);const c=this.users.filter(s=>s.role==="admin"||s.role==="super_admin");if(localStorage.setItem("adminUsers",JSON.stringify(c)),d==="user"){const s=localStorage.getItem("normalUsers");if(s){const n=JSON.parse(s).filter(r=>r.username!==o);localStorage.setItem("normalUsers",JSON.stringify(n))}}localStorage.removeItem(`password_${o}`),this.userMessage="用户删除成功",setTimeout(()=>{this.userMessage=""},2e3)}},saveUsersToStorage(){const o=this.users.filter(e=>e.role==="admin"||e.role==="super_admin");localStorage.setItem("adminUsers",JSON.stringify(o))},loadUsersFromStorage(){try{let o=[];const e=localStorage.getItem("adminUsers");e?o=[...JSON.parse(e)]:o=[{username:"superadmin",role:"super_admin"},{username:"admin",role:"admin"}];const d=localStorage.getItem("normalUsers");d&&JSON.parse(d).forEach(s=>{o.some(n=>n.username===s.username)||o.push({username:s.username,role:"user"})}),this.users=o}catch(o){console.error("加载用户列表失败:",o),this.users=[{username:"superadmin",role:"super_admin"},{username:"admin",role:"admin"}]}},async loadNavigationSettings(){try{const o=localStorage.getItem("navigationSettings");o&&(this.navigationItems=JSON.parse(o))}catch(o){console.error("加载导航设置失败:",o)}},async loadFeaturedSettings(){try{const o=localStorage.getItem("featuredArticlesSettings");o&&(this.featuredSettings=JSON.parse(o))}catch(o){console.error("加载最新文章设置失败:",o)}},async saveFeaturedSettings(){this.isSaving=!0,this.saveMessage="";try{localStorage.setItem("featuredArticlesSettings",JSON.stringify(this.featuredSettings)),this.saveMessage="最新文章设置保存成功",this.saveMessageType="success"}catch(o){this.saveMessage="保存失败，请重试",this.saveMessageType="error",console.error("保存最新文章设置失败:",o)}finally{setTimeout(()=>{this.isSaving=!1,this.saveMessage=""},2e3)}},toggleFeaturedArticle(o){const e=this.featuredSettings.featuredArticles.indexOf(o);e>-1?this.featuredSettings.featuredArticles.splice(e,1):this.featuredSettings.featuredArticles.push(o)},async saveNavigationSettings(){this.isSaving=!0,this.saveMessage="";try{localStorage.setItem("navigationSettings",JSON.stringify(this.navigationItems)),this.saveMessage="导航配置保存成功",this.saveMessageType="success",this.$emit("navigation-updated",this.navigationItems)}catch(o){this.saveMessage="保存失败，请重试",this.saveMessageType="error",console.error("保存导航设置失败:",o)}finally{setTimeout(()=>{this.isSaving=!1,this.saveMessage=""},2e3)}},toggleNavItemVisibility(o){const e=this.navigationItems.find(d=>d.id===o);e&&(e.visible=!e.visible)},async fetchArticles(){try{const o=localStorage.getItem("articles");o&&(this.articles=JSON.parse(o),this.articles=this.articles.map(e=>({...e,approvalStatus:e.approvalStatus||"pending",author:e.author||"管理员"})))}catch(o){console.error("获取文章列表失败:",o)}},async submitArticle(){if(!this.articleForm.title||!this.articleForm.content){alert("请填写标题和内容");return}try{const o={id:Date.now(),title:this.articleForm.title,category:this.articleForm.category,summary:this.articleForm.summary,content:this.articleForm.content,uploadTime:new Date().toLocaleString(),approvalStatus:"pending",author:this.articleForm.author||"管理员"};this.articles.push(o),localStorage.setItem("articles",JSON.stringify(this.articles)),this.articleForm={title:"",category:"tech",summary:"",content:"",author:""},alert("文章提交成功")}catch(o){console.error("提交文章失败:",o),alert("提交失败，请重试")}},editArticle(o){alert("编辑功能待实现")},deleteArticle(o){confirm("确定要删除这篇文章吗？")&&(this.articles=this.articles.filter(e=>e.id!==o),localStorage.setItem("articles",JSON.stringify(this.articles)))},approveArticle(o){const e=this.articles.find(d=>d.id===o);e&&(e.approvalStatus="approved",localStorage.setItem("articles",JSON.stringify(this.articles)),this.approvalMessage="文章已批准",this.approvalMessageType="success",setTimeout(()=>{this.approvalMessage=""},3e3))},rejectArticle(o){const e=this.articles.find(d=>d.id===o);e&&(e.approvalStatus="rejected",localStorage.setItem("articles",JSON.stringify(this.articles)),this.approvalMessage="文章已拒绝",this.approvalMessageType="error",setTimeout(()=>{this.approvalMessage=""},3e3))},resetArticleStatus(o){const e=this.articles.find(d=>d.id===o);e&&(e.approvalStatus="pending",localStorage.setItem("articles",JSON.stringify(this.articles)),this.approvalMessage="文章状态已重置为待审批",this.approvalMessageType="info",setTimeout(()=>{this.approvalMessage=""},3e3))}}},us={class:"admin-panel"},cs={class:"top-navbar"},ms={class:"nav-right"},gs={class:"user-info"},ps={key:0,class:"role-badge super-admin"},hs={key:1,class:"role-badge admin"},fs={class:"admin-content"},vs={class:"sidebar"},ys={class:"nav-menu"},bs={class:"main-content"},ws={key:0,class:"tab-content"},xs={class:"navigation-settings"},Ss={class:"nav-item-info"},As={class:"nav-item-details"},ks={class:"nav-item-name"},_s={class:"nav-item-id"},Us={class:"switch"},Is=["onUpdate:modelValue","onChange"],Ls=["disabled"],Ms={key:1,class:"tab-content"},Cs={class:"approval-settings"},Ps={class:"form-group"},Fs={class:"articles-list"},Ts={key:0,class:"empty-message"},Os={key:1,class:"approval-articles-grid"},Ns={class:"article-header"},Ds={class:"article-title"},Vs={class:"article-meta"},Bs={key:0},Rs={class:"article-summary"},Es={class:"approval-actions"},js=["onClick","disabled"],Js=["onClick","disabled"],zs=["onClick"],qs={key:2,class:"tab-content"},Hs={class:"featured-settings"},Gs={class:"form-group"},Ws={class:"featured-articles-list"},Ks={key:0,class:"empty-message"},Ys={key:1,class:"articles-grid"},Xs={class:"article-checkbox"},Zs=["checked","onChange"],Qs={class:"article-info"},$s={class:"article-title"},er={class:"article-meta"},tr=["disabled"],sr={class:"article-upload-form"},rr={class:"form-group"},or={class:"form-group"},nr={class:"form-group"},ir={class:"form-group"},ar={class:"form-group"},lr={class:"articles-list"},dr={class:"search-box"},ur={class:"articles-table"},cr={class:"article-title"},mr=["onClick"],gr=["onClick","onMouseenter"],pr={key:3,class:"tab-content"},hr={class:"admin-settings-content"},fr={class:"settings-section"},vr={class:"form-group"},yr={class:"form-group"},br={class:"form-group"},wr={key:4,class:"tab-content"},xr={class:"user-management-content"},Sr={class:"add-user-form"},Ar={class:"form-group"},kr={class:"form-group"},_r={class:"form-group"},Ur={key:0,class:"error-message"},Ir={key:1,class:"success-message"},Lr={class:"user-list"},Mr={class:"users-table"},Cr={key:0,class:"role-badge super-admin"},Pr={key:1,class:"role-badge admin"},Fr={key:2,class:"role-badge user"},Tr=["onClick"],Or={key:1,class:"disabled-text"};function Nr(o,e,d,c,s,n){return i(),a("div",us,[t("div",cs,[e[26]||(e[26]=t("div",{class:"nav-left"},[t("h1",null,"后台管理系统")],-1)),t("div",ms,[t("span",gs,[U(" 欢迎, "+u(s.currentUsername)+" ",1),s.isSuperAdmin?(i(),a("span",ps,"超级管理员")):(i(),a("span",hs,"管理员"))]),t("button",{class:"logout-btn",onClick:e[0]||(e[0]=(...r)=>n.handleLogout&&n.handleLogout(...r))},"退出登录")])]),t("div",fs,[t("div",vs,[t("ul",ys,[t("li",{class:p({active:s.activeTab==="navigation"}),onClick:e[1]||(e[1]=r=>s.activeTab="navigation")},[...e[27]||(e[27]=[t("span",{class:"nav-icon"},"📋",-1),t("span",null,"导航管理",-1)])],2),t("li",{class:p({active:s.activeTab==="articles"}),onClick:e[2]||(e[2]=r=>s.activeTab="articles")},[...e[28]||(e[28]=[t("span",{class:"nav-icon"},"📝",-1),t("span",null,"文章管理",-1)])],2),t("li",{class:p({active:s.activeTab==="articleApproval"}),onClick:e[3]||(e[3]=r=>s.activeTab="articleApproval")},[...e[29]||(e[29]=[t("span",{class:"nav-icon"},"✅",-1),t("span",null,"文章审批",-1)])],2),t("li",{class:p({active:s.activeTab==="adminSettings"}),onClick:e[4]||(e[4]=r=>s.activeTab="adminSettings")},[...e[30]||(e[30]=[t("span",{class:"nav-icon"},"🔐",-1),t("span",null,"账户设置",-1)])],2),s.isSuperAdmin?(i(),a("li",{key:0,class:p({active:s.activeTab==="userManagement"}),onClick:e[5]||(e[5]=r=>s.activeTab="userManagement")},[...e[31]||(e[31]=[t("span",{class:"nav-icon"},"👥",-1),t("span",null,"用户管理",-1)])],2)):g("",!0)])]),t("div",bs,[s.activeTab==="navigation"?(i(),a("div",ws,[e[33]||(e[33]=t("div",{class:"section-header"},[t("h2",null,"导航栏配置"),t("p",null,"管理网站导航栏中显示的各个模块")],-1)),t("div",xs,[(i(!0),a(b,null,w(s.navigationItems,r=>(i(),a("div",{key:r.id,class:"nav-item-config"},[t("div",Ss,[t("div",As,[t("span",ks,u(r.name),1),t("span",_s,"ID: "+u(r.id),1)]),t("label",Us,[m(t("input",{type:"checkbox","onUpdate:modelValue":l=>r.visible=l,onChange:l=>n.toggleNavItemVisibility(r.id)},null,40,Is),[[W,r.visible]]),e[32]||(e[32]=t("span",{class:"slider round"},null,-1))])])]))),128)),t("button",{class:"save-btn",onClick:e[6]||(e[6]=(...r)=>n.saveNavigationSettings&&n.saveNavigationSettings(...r)),disabled:s.isSaving},u(s.isSaving?"保存中...":"保存设置"),9,Ls),s.saveMessage?(i(),a("div",{key:0,class:p(["save-message",s.saveMessageType])},u(s.saveMessage),3)):g("",!0)])])):g("",!0),s.activeTab==="articleApproval"?(i(),a("div",Ms,[e[37]||(e[37]=t("div",{class:"section-header"},[t("h2",null,"文章审批"),t("p",null,"审批用户上传的文章，决定是否适合展示")],-1)),t("div",Cs,[t("div",Ps,[e[35]||(e[35]=t("label",{for:"approvalFilter"},"筛选文章",-1)),m(t("select",{id:"approvalFilter","onUpdate:modelValue":e[7]||(e[7]=r=>s.approvalFilter=r)},[...e[34]||(e[34]=[t("option",{value:"pending"},"待审批",-1),t("option",{value:"approved"},"已通过",-1),t("option",{value:"rejected"},"已拒绝",-1),t("option",{value:"all"},"全部文章",-1)])],512),[[_,s.approvalFilter]])]),t("div",Fs,[e[36]||(e[36]=t("h3",null,"待审批文章",-1)),n.filteredApprovalArticles.length===0?(i(),a("div",Ts," 暂无"+u(s.approvalFilter==="pending"?"待审批":s.approvalFilter==="approved"?"已通过":s.approvalFilter==="rejected"?"已拒绝":"")+"文章 ",1)):(i(),a("div",Os,[(i(!0),a(b,null,w(n.filteredApprovalArticles,r=>(i(),a("div",{key:r.id,class:p(["approval-article-item",{"status-pending":r.approvalStatus==="pending","status-approved":r.approvalStatus==="approved","status-rejected":r.approvalStatus==="rejected"}])},[t("div",Ns,[t("h4",Ds,u(r.title),1),t("span",{class:p(["approval-status","status-"+(r.approvalStatus||"pending")])},u(r.approvalStatus==="pending"?"待审批":r.approvalStatus==="approved"?"已通过":"已拒绝"),3)]),t("div",Vs,[t("span",null,u(r.category),1),t("span",null,u(r.uploadTime),1),r.author?(i(),a("span",Bs,"作者: "+u(r.author),1)):g("",!0)]),t("div",Rs,u(r.summary||"暂无摘要"),1),t("div",Es,[t("button",{class:"approve-btn",onClick:l=>n.approveArticle(r.id),disabled:r.approvalStatus==="approved"}," 批准 ",8,js),t("button",{class:"reject-btn",onClick:l=>n.rejectArticle(r.id),disabled:r.approvalStatus==="rejected"}," 拒绝 ",8,Js),t("button",{class:"reset-btn",onClick:l=>n.resetArticleStatus(r.id)}," 重置状态 ",8,zs)])],2))),128))]))]),s.approvalMessage?(i(),a("div",{key:0,class:p(["approval-message",s.approvalMessageType])},u(s.approvalMessage),3)):g("",!0)])])):g("",!0),s.activeTab==="articles"?(i(),a("div",qs,[e[53]||(e[53]=t("div",{class:"section-header"},[t("h2",null,"文章管理"),t("p",null,"管理网站的文章内容")],-1)),t("div",Hs,[e[42]||(e[42]=t("h3",null,"文章显示设置",-1)),e[43]||(e[43]=t("p",null,"设置首页显示的最新文章数量和置顶文章",-1)),t("div",Gs,[e[38]||(e[38]=t("label",{for:"displayCount"},"显示文章数量",-1)),m(t("input",{type:"number",id:"displayCount","onUpdate:modelValue":e[8]||(e[8]=r=>s.featuredSettings.displayCount=r),min:"1",max:"10",placeholder:"请输入显示数量"},null,512),[[h,s.featuredSettings.displayCount,void 0,{number:!0}]]),e[39]||(e[39]=t("small",null,"最多可显示10篇文章",-1))]),t("div",Ws,[e[40]||(e[40]=t("h3",null,"文章置顶设置",-1)),e[41]||(e[41]=t("p",null,"选择需要在首页优先显示的文章（置顶文章将按选择顺序显示）",-1)),s.articles.length===0?(i(),a("div",Ks," 暂无文章，请先添加文章 ")):(i(),a("div",Ys,[(i(!0),a(b,null,w(s.articles,r=>(i(),a("div",{key:r.id,class:"article-item"},[t("label",Xs,[t("input",{type:"checkbox",checked:s.featuredSettings.featuredArticles.includes(r.id),onChange:l=>n.toggleFeaturedArticle(r.id)},null,40,Zs),t("span",Qs,[t("span",$s,u(r.title),1),t("span",er,u(r.category)+" · "+u(r.uploadTime),1)])])]))),128))]))]),t("button",{class:"save-btn",onClick:e[9]||(e[9]=(...r)=>n.saveFeaturedSettings&&n.saveFeaturedSettings(...r)),disabled:s.isSaving},u(s.isSaving?"保存中...":"保存设置"),9,tr),s.saveMessage?(i(),a("div",{key:0,class:p(["save-message",s.saveMessageType])},u(s.saveMessage),3)):g("",!0)]),e[54]||(e[54]=t("hr",{class:"section-divider"},null,-1)),t("div",sr,[e[50]||(e[50]=t("h3",null,"上传新文章",-1)),t("div",rr,[e[44]||(e[44]=t("label",{for:"articleTitle"},"文章标题",-1)),m(t("input",{type:"text",id:"articleTitle","onUpdate:modelValue":e[10]||(e[10]=r=>s.articleForm.title=r),placeholder:"请输入文章标题"},null,512),[[h,s.articleForm.title]])]),t("div",or,[e[46]||(e[46]=t("label",{for:"articleCategory"},"文章分类",-1)),m(t("select",{id:"articleCategory","onUpdate:modelValue":e[11]||(e[11]=r=>s.articleForm.category=r)},[...e[45]||(e[45]=[t("option",{value:"tech"},"技术",-1),t("option",{value:"life"},"生活",-1),t("option",{value:"travel"},"旅行",-1)])],512),[[_,s.articleForm.category]])]),t("div",nr,[e[47]||(e[47]=t("label",{for:"articleSummary"},"文章摘要",-1)),m(t("textarea",{id:"articleSummary","onUpdate:modelValue":e[12]||(e[12]=r=>s.articleForm.summary=r),placeholder:"请输入文章摘要",rows:"3"},null,512),[[h,s.articleForm.summary]])]),t("div",ir,[e[48]||(e[48]=t("label",{for:"articleAuthor"},"作者",-1)),m(t("input",{type:"text",id:"articleAuthor","onUpdate:modelValue":e[13]||(e[13]=r=>s.articleForm.author=r),placeholder:"请输入作者名称"},null,512),[[h,s.articleForm.author]])]),t("div",ar,[e[49]||(e[49]=t("label",{for:"articleContent"},"文章内容",-1)),m(t("textarea",{id:"articleContent","onUpdate:modelValue":e[14]||(e[14]=r=>s.articleForm.content=r),placeholder:"请输入文章内容",rows:"10"},null,512),[[h,s.articleForm.content]])]),t("button",{class:"submit-btn",onClick:e[15]||(e[15]=(...r)=>n.submitArticle&&n.submitArticle(...r))},"提交文章")]),t("div",lr,[e[52]||(e[52]=t("h3",null,"已上传文章",-1)),t("div",dr,[m(t("input",{type:"text","onUpdate:modelValue":e[16]||(e[16]=r=>s.searchTerm=r),placeholder:"搜索文章..."},null,512),[[h,s.searchTerm]])]),t("table",ur,[e[51]||(e[51]=t("thead",null,[t("tr",null,[t("th",null,"标题"),t("th",null,"分类"),t("th",null,"上传时间"),t("th",null,"操作")])],-1)),t("tbody",null,[(i(!0),a(b,null,w(n.filteredArticles,r=>(i(),a("tr",{key:r.id},[t("td",cr,u(r.title),1),t("td",null,u(r.category),1),t("td",null,u(r.uploadTime),1),t("td",null,[t("button",{class:"edit-btn",onClick:l=>n.editArticle(r)},"编辑",8,mr),t("button",{class:p(["delete-btn",{"delete-btn-active":s.hoveredArticleId===r.id}]),onClick:l=>n.deleteArticle(r.id),onMouseenter:l=>s.hoveredArticleId=r.id,onMouseleave:e[17]||(e[17]=l=>s.hoveredArticleId=null)},"删除",42,gr)])]))),128))])])])])):g("",!0),s.activeTab==="adminSettings"?(i(),a("div",pr,[e[59]||(e[59]=t("div",{class:"section-header"},[t("h2",null,"账户设置"),t("p",null,"修改您的账户密码")],-1)),t("div",hr,[t("div",fr,[e[58]||(e[58]=t("h3",null,"修改密码",-1)),t("div",vr,[e[55]||(e[55]=t("label",{for:"currentPassword"},"当前密码",-1)),m(t("input",{type:"password",id:"currentPassword","onUpdate:modelValue":e[18]||(e[18]=r=>s.passwordForm.currentPassword=r)},null,512),[[h,s.passwordForm.currentPassword]])]),t("div",yr,[e[56]||(e[56]=t("label",{for:"newPassword"},"新密码",-1)),m(t("input",{type:"password",id:"newPassword","onUpdate:modelValue":e[19]||(e[19]=r=>s.passwordForm.newPassword=r)},null,512),[[h,s.passwordForm.newPassword]])]),t("div",br,[e[57]||(e[57]=t("label",{for:"confirmPassword"},"确认新密码",-1)),m(t("input",{type:"password",id:"confirmPassword","onUpdate:modelValue":e[20]||(e[20]=r=>s.passwordForm.confirmPassword=r)},null,512),[[h,s.passwordForm.confirmPassword]])]),t("button",{class:"submit-btn",onClick:e[21]||(e[21]=(...r)=>n.handlePasswordUpdate&&n.handlePasswordUpdate(...r))},"更新密码"),s.passwordMessage?(i(),a("div",{key:0,class:p(["password-message",s.passwordMessageType])},u(s.passwordMessage),3)):g("",!0)])])])):g("",!0),s.activeTab==="userManagement"&&s.isSuperAdmin?(i(),a("div",wr,[e[67]||(e[67]=t("div",{class:"section-header"},[t("h2",null,"用户管理"),t("p",null,"添加和删除用户账户")],-1)),t("div",xr,[t("div",Sr,[e[64]||(e[64]=t("h3",null,"添加新用户",-1)),t("div",Ar,[e[60]||(e[60]=t("label",{for:"username"},"用户名",-1)),m(t("input",{type:"text",id:"username","onUpdate:modelValue":e[22]||(e[22]=r=>s.newUserForm.username=r),placeholder:"请输入用户名"},null,512),[[h,s.newUserForm.username]])]),t("div",kr,[e[61]||(e[61]=t("label",{for:"password"},"密码",-1)),m(t("input",{type:"password",id:"password","onUpdate:modelValue":e[23]||(e[23]=r=>s.newUserForm.password=r),placeholder:"请输入密码"},null,512),[[h,s.newUserForm.password]])]),t("div",_r,[e[63]||(e[63]=t("label",{for:"role"},"角色",-1)),m(t("select",{id:"role","onUpdate:modelValue":e[24]||(e[24]=r=>s.newUserForm.role=r)},[...e[62]||(e[62]=[t("option",{value:"admin"},"管理员",-1),t("option",{value:"super_admin"},"超级管理员",-1)])],512),[[_,s.newUserForm.role]])]),t("button",{class:"submit-btn",onClick:e[25]||(e[25]=(...r)=>n.handleAddUser&&n.handleAddUser(...r))},"添加用户"),s.userError?(i(),a("div",Ur,u(s.userError),1)):g("",!0),s.userMessage?(i(),a("div",Ir,u(s.userMessage),1)):g("",!0)]),t("div",Lr,[e[66]||(e[66]=t("h3",null,"用户列表",-1)),t("table",Mr,[e[65]||(e[65]=t("thead",null,[t("tr",null,[t("th",null,"用户名"),t("th",null,"角色"),t("th",null,"操作")])],-1)),t("tbody",null,[(i(!0),a(b,null,w(s.users,r=>(i(),a("tr",{key:r.username},[t("td",null,u(r.username),1),t("td",null,[r.role==="super_admin"?(i(),a("span",Cr,"超级管理员")):r.role==="admin"?(i(),a("span",Pr,"管理员")):(i(),a("span",Fr,"普通用户"))]),t("td",null,[r.username!=="superadmin"?(i(),a("button",{key:0,class:"delete-btn",onClick:l=>n.handleDeleteUser(r.username)}," 删除 ",8,Tr)):(i(),a("span",Or,"不可删除"))])]))),128))])])])])])):g("",!0)])])])}const Dr=f(ds,[["render",Nr],["__scopeId","data-v-cb80c562"]]),Vr={name:"App",components:{Header:be,Hero:Ae,About:De,BlogIntro:qe,Articles:ht,ArticleForm:Tt,Contact:Jt,Footer:Yt,BackToTop:Qt,AdminLogin:ls,AdminPanel:Dr},data(){return{showAdminLogin:!1,showAdminPanel:!1,showArticleForm:!1,adminLoginSource:{},navigationSettings:[{id:"hero",name:"首页横幅",visible:!0},{id:"about",name:"关于开发者",visible:!0},{id:"blogIntro",name:"博格介绍",visible:!0},{id:"articles",name:"文章列表",visible:!0},{id:"contact",name:"联系开发者",visible:!0}]}},mounted(){this.checkLoginStatus(),this.loadNavigationSettings(),window.addEventListener("popstate",this.checkLoginStatus)},beforeUnmount(){window.removeEventListener("popstate",this.checkLoginStatus)},methods:{handleShowAdminLogin(o={}){this.showAdminLogin=!0,this.adminLoginSource=o},showArticleFormDialog(){this.showArticleForm=!0},closeArticleForm(){this.showArticleForm=!1},checkLoginStatus(){const o=localStorage.getItem("adminLoggedIn")==="true";if(localStorage.getItem("userLoggedIn")==="true"&&!o){this.showAdminPanel=!1,this.showAdminLogin=!1;return}o?(this.showAdminPanel=!0,this.showAdminLogin=!1):this.showAdminLogin||(this.showAdminPanel=!1)},loadNavigationSettings(){try{const o=localStorage.getItem("navigationSettings");o&&(this.navigationSettings=JSON.parse(o))}catch(o){console.error("加载导航设置失败:",o)}},isNavVisible(o){const e=this.navigationSettings.find(d=>d.id===o);return e?e.visible:!0},handleLoginSuccess(){this.showAdminLogin=!1,this.showAdminPanel=!0},handleLogout(){localStorage.removeItem("adminLoggedIn"),localStorage.removeItem("adminRole"),localStorage.removeItem("adminUsername"),localStorage.removeItem("userLoggedIn"),this.showAdminPanel=!1,this.showAdminLogin=!1,setTimeout(()=>{window.location.href="https://lensi-zhang.github.io/boge-page/"},0)},handleNavigationUpdated(o){this.navigationSettings=o},handleArticlePublished(){this.$refs.articlesRef&&(this.$refs.articlesRef.currentPage=1,this.$refs.articlesRef.fetchArticles())}}},Br={class:"min-h-screen"},Rr={key:0},Er={key:1},jr={key:2};function Jr(o,e,d,c,s,n){const r=y("AdminPanel"),l=y("AdminLogin"),x=y("Header"),v=y("Hero"),E=y("About"),j=y("BlogIntro"),J=y("Articles"),z=y("Contact"),q=y("ArticleForm"),H=y("Footer"),G=y("BackToTop");return i(),a("div",Br,[s.showAdminPanel?(i(),a("div",Rr,[S(r,{onLogout:n.handleLogout,onNavigationUpdated:n.handleNavigationUpdated,onArticleCreated:n.handleArticlePublished},null,8,["onLogout","onNavigationUpdated","onArticleCreated"])])):s.showAdminLogin?(i(),a("div",Er,[S(l,{onLoginSuccess:n.handleLoginSuccess,"show-permission-alert":!0},null,8,["onLoginSuccess"])])):(i(),a("div",jr,[S(x,{onShowAdminLogin:n.handleShowAdminLogin,onShowArticleForm:n.showArticleFormDialog},null,8,["onShowAdminLogin","onShowArticleForm"]),t("main",null,[n.isNavVisible("hero")?(i(),A(v,{key:0})):g("",!0),n.isNavVisible("about")?(i(),A(E,{key:1})):g("",!0),n.isNavVisible("blogIntro")?(i(),A(j,{key:2})):g("",!0),n.isNavVisible("articles")?(i(),A(J,{key:3,ref:"articlesRef"},null,512)):g("",!0),n.isNavVisible("contact")?(i(),A(z,{key:4})):g("",!0)]),s.showArticleForm?(i(),a("div",{key:0,class:"article-form-modal-overlay",onClick:e[2]||(e[2]=(...I)=>n.closeArticleForm&&n.closeArticleForm(...I))},[t("div",{class:"article-form-modal",onClick:e[1]||(e[1]=T(()=>{},["stop"]))},[t("button",{class:"article-form-close",onClick:e[0]||(e[0]=(...I)=>n.closeArticleForm&&n.closeArticleForm(...I))},[...e[3]||(e[3]=[t("i",{class:"fa fa-times","aria-hidden":"true"},null,-1)])]),S(q,{onArticlePublished:n.handleArticlePublished},null,8,["onArticlePublished"])])])):g("",!0),S(H),S(G)]))])}const zr=f(Vr,[["render",Jr]]),qr=K(zr);qr.mount("#app");
